% FraGoLi v. 1.0.0 \y 2025
% 
% (c) 2025 Paul Eduard Koenig
% pauleduardkoenig (at) gmail [dot] com
% University of Frankfurt, Department of Linguistics/Semantics
%
%88~~                    e88~~\           888     ,e, 
%88___ 888-~\   /~~~8e  d888      e88~-_  888      "  
%88    888          88b 8888 __  d888   i 888     888 
%88    888     e88~-888 8888   | 8888   | 888     888 
%88    888    C888  888 Y888   | Y888   ' 888     888 
%88    888     "88_-888  "88__/   "88_-~  888____ 888 
%  
% The package is mainly designed for the semantics department and focuses on providing a minimal syntax for fast formula derivation. 
% Formula-Style is losely based on the accompanying material to an introductory course to linguistic semantics by T. E. Zimmermann.
%
%% This program can be redistributed and/or modified under the terms
%% of the LaTeX Project Public License Distributed from CTAN archives
%% in directory macros/latex/base/lppl.txt.
% 
\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{fragoli}[2025/03/07 v. 1.0.0 LaTeX package for the department of Linguistics/Semantics at Goethe University of Frankfurt]
% Packages
\RequirePackage{xparse, xcolor, enumitem, nicefrac, bm, amsmath, xstring, pdftexcmds, etoolbox, kvoptions, comment}

% ------------------------------------------------------------ 
% options
% ------------------------------------------------------------ 
\SetupKeyvalOptions{
	family=FGL,
	prefix=FGL@
}
\DeclareStringOption[english]{language}
\DeclareStringOption[normal]{typestyle}
\DeclareStringOption[\sblank]{rulesituation}
\DeclareStringOption[\sstar]{situation}
\DeclareBoolOption{usetypes}
\DeclareBoolOption[false]{debug}
\DeclareBoolOption[true]{userainbow}
\DeclareBoolOption[true]{showawnser}
\DeclareBoolOption[true]{usedscount}
\ProcessKeyvalOptions*


% ------------------------------
% option actions
% ------------------------------
\ifFGL@userainbow
	\definecolor{fglcpcolor0}{RGB}{000, 000, 000}
	\definecolor{fglcpcolor1}{RGB}{000, 000, 000} 
	\definecolor{fglcpcolor2}{RGB}{000, 000, 000}
	\definecolor{fglcpcolor3}{RGB}{000, 000, 000}
	\definecolor{fglcpcolor4}{RGB}{000, 000, 000}
	\definecolor{fglcpcolor5}{RGB}{000, 000, 000} 
\fi

\ifFGL@usedscount
	\definecolor{deivationrowcountcolor}{rgb}{255,255,255}
\fi

\let\fgslisinfgls\@fglsundefined
\newcommand{\fglsisinfgls}{}
\let\fglsisinderivation\@fglsundefined
\newcommand{\fglsisinderivation}{}


% ------------------------------
% counter
% ------------------------------
\newcounter{@fglsderivationcounter}
\setcounter{@fglsderivationcounter}{0}
\newcounter{@fglscalcitemcounter}

% ------------------------------
% define internal types
% ------------------------------

\let\FraGoLi\@fglsundefined
\newcommand{\FraGoLi}{{\Large F}\!\textsubscript{{\Large r}}\!{\Large a}{\large G}\!\textsubscript{{\large o}}\!{\large L}{\Large i}}

\newcommand{\@typet}{}
\newcommand{\@typee}{}
\newcommand{\@types}{}
\newcommand{\@typeet}{}
\newcommand{\@typest}{}
\newcommand{\@typeeet}{}
\ifFGL@usetypes
	\renewcommand{\@typet}{\type{t}}
	\renewcommand{\@typee}{\type{e}}
	\renewcommand{\@types}{\type{s}}
	\renewcommand{\@typeet}{\type{et}}
	\renewcommand{\@typest}{\type{st}}
	\renewcommand{\@typeeet}{\type{e\type{et}}}
\fi

% ------------------------------
% define language specific labels:
% ------------------------------
% - labels are defined separate for each language
% - if language is not set, English is used
% ------------------------------
\newcommand{\@fragolivarlexicon}{Lexicon}
\newcommand{\@fragolivarrules}{Rules}
\newcommand{\@fragolivarrulessyn}{Rules (syntax)}
\newcommand{\@fragolivarderivation}{Derivation}
\newcommand{\@fragolivartree}{Tree}
\newcommand{\@fragolivartreesem}{Tree (semantic)}
\newcommand{\@fragolivartreesyn}{Tree (syntax)}
\newcommand{\@fragolivarlanguage}{Language}
\newcommand{\@fragolivarconversion}{Conv.}
\newcommand{\@fragolivarnotationconvention}{Not. Conv.}
\newcommand{\@fragolivarand}{and}
\newcommand{\@fragolivaror}{or}
\newcommand{\@fragolivarno}{no-}
\newcommand{\@fragolivaroneindef}{one-\textsubscript{\textit{ind}}}
\newcommand{\@fragolivaronenum}{one-\textsubscript{\textit{num}}}
\newcommand{\@fragolivarevery}{every-}
\newcommand{\@fragolivardefarticle}{the\textsubscript{\textit{\text{R.}}}}
\newcommand{\@fragolivarmost}{the most}
\newcommand{\@fragolivarlis}{is}
\newcommand{\@fragolivarlof}{is}
\newcommand{\@fragolivarlarticle}{a}
\newcommand{\@fragolivarlarticlen}{an}
\newcommand{\@fragolivarlarticlegermanswitch}{\@fragolivarlarticle}
\newcommand{\@fragolivarlarticlegermanswitchn}{\@fragolivarlarticlen}
\newcommand{\@fragolivarlexbool}[2][\@fragolivarlarticle]{is #1 \MakeLowercase{#2} in}
\newcommand{\@fragolivarlexwoman}{Woman}
\newcommand{\@fragolivarlexman}{Man}
\newcommand{\@fragolivarlexdog}{Dog}
\newcommand{\@fragolivarlexanimal}{Animal}
\newcommand{\@fragolivarlexchild}{Child}
\newcommand{\@fragolivarlexhouse}{House}
\newcommand{\@fragolivarlexattdox}{thinks}
\newcommand{\@fragolivarlexattepi}{knows}
\newcommand{\@fragolivarlexattbou}{wants}
\newcommand{\@fragolivarlexattdoxterm}{doxastic}
\newcommand{\@fragolivarlexattepiterm}{epistemic}
\newcommand{\@fragolivarlexattbouterm}{bouletic}
% set those labels according to the set language (if different than english)
\def\@fragoliconstlgerman{german}
\ifx\FGL@language\@fragoliconstlgerman
	\renewcommand{\@fragolivarlexicon}{Lexikon}
	\renewcommand{\@fragolivarrules}{Regeln}
	\renewcommand{\@fragolivarrulessyn}{Regeln (Syntax)}
	\renewcommand{\@fragolivarderivation}{Ableitung}
	\renewcommand{\@fragolivartree}{Baum}
	\renewcommand{\@fragolivartreesem}{Baum (Semantik)}
	\renewcommand{\@fragolivartreesyn}{Baum (Syntax)}
	\renewcommand{\@fragolivarlanguage}{Sprache}
	\renewcommand{\@fragolivarconversion}{Konv.}
	\renewcommand{\@fragolivarnotationconvention}{Not.}
	\renewcommand{\@fragolivarand}{und}
	\renewcommand{\@fragolivaror}{oder}
	\renewcommand{\@fragolivarno}{kein-}
	\renewcommand{\@fragolivaroneindef}{ein-\textsubscript{\textit{ind}}}
	\renewcommand{\@fragolivaronenum}{ein-\textsubscript{\textit{num}}}
	\renewcommand{\@fragolivarevery}{jed-}
	\renewcommand{\@fragolivarmost}{die meisten}
	\renewcommand{\@fragolivardefarticle}{d-\textsubscript{\textit{\text{R.}}}}
	\renewcommand{\@fragolivarlof}{von}
	\renewcommand{\@fragolivarlis}{ist}
	\renewcommand{\@fragolivarlarticle}{ein}
	\renewcommand{\@fragolivarlarticlen}{eine}
	\renewcommand{\@fragolivarlarticlegermanswitch}{\@fragolivarlarticlen}
	\renewcommand{\@fragolivarlarticlegermanswitchn}{\@fragolivarlarticle}
	\renewcommand{\@fragolivarlexbool}[2][\@fragolivarlarticle]{ist #1 #2 in}
	\renewcommand{\@fragolivarlexwoman}{Frau}
	\renewcommand{\@fragolivarlexman}{Mann}
	\renewcommand{\@fragolivarlexdog}{Hund}
	\renewcommand{\@fragolivarlexhouse}{Haus}
	\renewcommand{\@fragolivarlexanimal}{Tier}
	\renewcommand{\@fragolivarlexchild}{Kind}
	\renewcommand{\@fragolivarlexattdox}{meint}
	\renewcommand{\@fragolivarlexattepi}{wei\sss}
	\renewcommand{\@fragolivarlexattbou}{will}
	\renewcommand{\@fragolivarlexattdoxterm}{doxastische}
	\renewcommand{\@fragolivarlexattepiterm}{epistemische}
	\renewcommand{\@fragolivarlexattbouterm}{bouletische}
\fi
% ------------------------------
% define types style:
% ------------------------------
% - labels are defined separate for each style
% - if language is not set, normal is used
% ------------------------------
\newcommand{\@fragolitpnl}{\ensuremath{\langle}}
\newcommand{\@fragolitpnr}{\ensuremath{\rangle}}
\let\type\@fglsundefined
\newcommand{\type}[1]{\@fragolitpnl\!\ensuremath{#1}\!\@fragolitpnr}
\def\@fragoliconsttsclassic{classic}
\ifx\FGL@typestyle\@fragoliconsttsclassic
\renewcommand{\type}[1]{(\ensuremath{#1})}
\fi

		
% ------------------------------------------------------------ 
% constants
% ------------------------------------------------------------ 


% ------------------------------
% traces
% ------------------------------
\let\trace\@fglsundefined
\let\tracE\@fglsundefined
\let\tracex\@fglsundefined
\let\tracEx\@fglsundefined
\let\traceX\@fglsundefined
\let\tracEX\@fglsundefined
\let\tracey\@fglsundefined
\let\tracEy\@fglsundefined
\let\traceY\@fglsundefined
\let\tracEY\@fglsundefined
\let\tracez\@fglsundefined
\let\tracEz\@fglsundefined
\let\traceZ\@fglsundefined
\let\tracEZ\@fglsundefined

\NewDocumentCommand{\trace}{m O{\textit{t}}}{\text{\textit{#2}\textsubscript{{\normalfont \textit{#1}}}} }
\NewDocumentCommand{\tracE}{m O{\textit{t}}}{\text{\textbf{#2}\textsubscript{\textit{#1}}}}
\NewDocumentCommand{\tracex}{O{\textit{t}}}{\trace{\textit{x}}[#1]}
\NewDocumentCommand{\tracEx}{O{\textit{t}}}{\tracE{\textit{x}}[#1]}
\NewDocumentCommand{\traceX}{O{\textit{t}}}{\trace{\textit{X}}[#1]}
\NewDocumentCommand{\tracEX}{O{\textit{t}}}{\tracE{\textit{X}}[#1]}
\NewDocumentCommand{\tracey}{O{\textit{t}}}{\trace{\textit{y}}[#1]}
\NewDocumentCommand{\tracEy}{O{\textit{t}}}{\tracE{\textit{y}}[#1]}
\NewDocumentCommand{\traceY}{O{\textit{t}}}{\trace{\textit{Y}}[#1]}
\NewDocumentCommand{\tracEY}{O{\textit{t}}}{\tracE{\textit{Y}}[#1]}
\NewDocumentCommand{\tracez}{O{\textit{t}}}{\trace{\textit{z}}[#1]}
\NewDocumentCommand{\tracEz}{O{\textit{t}}}{\tracE{\textit{z}}[#1]}
\NewDocumentCommand{\traceZ}{O{\textit{t}}}{\trace{\textit{Z}}[#1]}
\NewDocumentCommand{\tracEZ}{O{\textit{t}}}{\tracE{\textit{Z}}[#1]}




% ------------------------------
% situations
% ------------------------------

\let\sarg\@fglsundefined
\let\sarG\@fglsundefined
\let\saRg\@fglsundefined
\let\saRG\@fglsundefined
\let\sblank\@fglsundefined
\let\sblanK\@fglsundefined
\let\sstar\@fglsundefined
\let\sstaR\@fglsundefined
\let\szero\@fglsundefined
\let\szerO\@fglsundefined
\let\sone\@fglsundefined
\let\sonE\@fglsundefined
\let\stwo\@fglsundefined
\let\stwO\@fglsundefined
\let\sthree\@fglsundefined
\let\sthreE\@fglsundefined
\let\sfour\@fglsundefined
\let\sfouR\@fglsundefined
\let\sfive\@fglsundefined
\let\sfivE\@fglsundefined
\let\ssix\@fglsundefined
\let\ssiX\@fglsundefined
\let\sseven\@fglsundefined
\let\sseveN\@fglsundefined
\let\seight\@fglsundefined
\let\seighT\@fglsundefined
\let\snine\@fglsundefined
\let\sninE\@fglsundefined
\let\sten\@fglsundefined
\let\steN\@fglsundefined
\newcommand{\sarg}[1]{\text{\ensuremath{s_{\!#1}}}}
\newcommand{\sarG}[1]{\text{\ensuremath{\bm{s_{\!#1}}}}}
\newcommand{\saRg}[1]{\text{\ensuremath{s^{\!#1}}}}
\newcommand{\saRG}[1]{\text{\ensuremath{\bm{s^{\!#1}}}}}
\newcommand{\sblank}{\text{\textit{s}}}
\newcommand{\sblanK}{\text{\textit{\textbf{s}}}}
\newcommand{\sstar}{\saRg{\ast}}
\newcommand{\sstaR}{\saRG{\ast}}
\newcommand{\szero}{\sarg{0}}
\newcommand{\szerO}{\sarG{0}}
\newcommand{\sone}{\sarg{1}}
\newcommand{\sonE}{\sarG{1}}
\newcommand{\stwo}{\sarg{2}}
\newcommand{\stwO}{\sarG{2}}
\newcommand{\sthree}{\sarg{3}}
\newcommand{\sthreE}{\sarG{3}}
\newcommand{\sfour}{\sarg{4}}
\newcommand{\sfouR}{\sarG{4}}
\newcommand{\sfive}{\sarg{5}}
\newcommand{\sfivE}{\sarG{5}}
\newcommand{\ssix}{\sarg{6}}
\newcommand{\ssiX}{\sarG{6}}
\newcommand{\sseven}{\sarg{7}}
\newcommand{\sseveN}{\sarG{7}}
\newcommand{\seight}{\sarg{8}}
\newcommand{\seighT}{\sarG{8}}
\newcommand{\snine}{\sarg{9}}
\newcommand{\sninE}{\sarG{9}}
\newcommand{\sten}{\sarg{10}}
\newcommand{\steN}{\sarG{10}}


% ------------------------------
% types
% ------------------------------

\let\typet\@fglsundefined
\let\typee\@fglsundefined
\let\types\@fglsundefined
\let\typeee\@fglsundefined
\let\typeet\@fglsundefined
\let\typees\@fglsundefined
\let\typess\@fglsundefined
\let\typest\@fglsundefined
\let\typese\@fglsundefined
\let\typett\@fglsundefined
\let\typete\@fglsundefined
\let\typets\@fglsundefined
\newcommand{\typet}{\type{t}}
\newcommand{\typee}{\type{e}}
\newcommand{\types}{\type{s}}
\newcommand{\typeee}{\type{ee}}
\newcommand{\typeet}{\type{et}}
\newcommand{\typees}{\type{es}}
\newcommand{\typess}{\type{ss}}
\newcommand{\typest}{\type{st}}
\newcommand{\typese}{\type{se}}
\newcommand{\typett}{\type{tt}}
\newcommand{\typete}{\type{te}}
\newcommand{\typets}{\type{ts}}

\let\typesSS\@fglsundefined
\let\typesST\@fglsundefined
\let\typesSE\@fglsundefined
\let\typesTS\@fglsundefined
\let\typesTE\@fglsundefined
\let\typesTT\@fglsundefined
\let\typesES\@fglsundefined
\let\typesET\@fglsundefined
\let\typesEE\@fglsundefined
\let\typeSSs\@fglsundefined
\let\typeSSt\@fglsundefined
\let\typeSSe\@fglsundefined
\let\typeSTs\@fglsundefined
\let\typeSTe\@fglsundefined
\let\typeSTt\@fglsundefined
\let\typeSEs\@fglsundefined
\let\typeSEt\@fglsundefined
\let\typeSEe\@fglsundefined
\newcommand{\typesSS}{\type{s\type{ss}}}
\newcommand{\typesST}{\type{s\type{st}}}
\newcommand{\typesSE}{\type{s\type{se}}}
\newcommand{\typesTS}{\type{s\type{ts}}}
\newcommand{\typesTE}{\type{s\type{te}}}
\newcommand{\typesTT}{\type{s\type{tt}}}
\newcommand{\typesES}{\type{s\type{es}}}
\newcommand{\typesET}{\type{s\type{et}}}
\newcommand{\typesEE}{\type{s\type{ee}}}
\newcommand{\typeSSs}{\type{\type{ss}s}}
\newcommand{\typeSSt}{\type{\type{ss}t}}
\newcommand{\typeSSe}{\type{\type{ss}e}}
\newcommand{\typeSTs}{\type{\type{st}s}}
\newcommand{\typeSTe}{\type{\type{st}e}}
\newcommand{\typeSTt}{\type{\type{st}t}}
\newcommand{\typeSEs}{\type{\type{se}s}}
\newcommand{\typeSEt}{\type{\type{se}t}}
\newcommand{\typeSEe}{\type{\type{se}e}}

\let\typeeEE\@fglsundefined
\let\typeeES\@fglsundefined
\let\typeeET\@fglsundefined
\let\typeeSS\@fglsundefined
\let\typeeSE\@fglsundefined
\let\typeeST\@fglsundefined
\let\typeeTT\@fglsundefined
\let\typeeTE\@fglsundefined
\let\typeeTS\@fglsundefined
\let\typeEEe\@fglsundefined
\let\typeEEs\@fglsundefined
\let\typeEEt\@fglsundefined
\let\typeESs\@fglsundefined
\let\typeESe\@fglsundefined
\let\typeESt\@fglsundefined
\let\typeETt\@fglsundefined
\let\typeETe\@fglsundefined
\let\typeETs\@fglsundefined
\newcommand{\typeeEE}{\type{e\type{ee}}}
\newcommand{\typeeES}{\type{e\type{es}}}
\newcommand{\typeeET}{\type{e\type{et}}}
\newcommand{\typeeSS}{\type{e\type{ss}}}
\newcommand{\typeeSE}{\type{e\type{se}}}
\newcommand{\typeeST}{\type{e\type{st}}}
\newcommand{\typeeTT}{\type{e\type{tt}}}
\newcommand{\typeeTE}{\type{e\type{te}}}
\newcommand{\typeeTS}{\type{e\type{ts}}}
\newcommand{\typeEEe}{\type{\type{ee}e}}
\newcommand{\typeEEs}{\type{\type{ee}s}}
\newcommand{\typeEEt}{\type{\type{ee}t}}
\newcommand{\typeESs}{\type{\type{es}s}}
\newcommand{\typeESe}{\type{\type{es}e}}
\newcommand{\typeESt}{\type{\type{es}t}}
\newcommand{\typeETt}{\type{\type{et}t}}
\newcommand{\typeETe}{\type{\type{et}e}}
\newcommand{\typeETs}{\type{\type{et}s}}

\let\typetTT\@fglsundefined
\let\typetTS\@fglsundefined
\let\typetTE\@fglsundefined
\let\typetEE\@fglsundefined
\let\typetET\@fglsundefined
\let\typetES\@fglsundefined
\let\typetSS\@fglsundefined
\let\typetSE\@fglsundefined
\let\typetST\@fglsundefined
\let\typeTTt\@fglsundefined
\let\typeTTs\@fglsundefined
\let\typeTTe\@fglsundefined
\let\typeTEe\@fglsundefined
\let\typeTEt\@fglsundefined
\let\typeTEs\@fglsundefined
\let\typeTSs\@fglsundefined
\let\typeTSe\@fglsundefined
\let\typeTSt\@fglsundefined
\newcommand{\typetTT}{\type{t\type{tt}}}
\newcommand{\typetTS}{\type{t\type{ts}}}
\newcommand{\typetTE}{\type{t\type{te}}}
\newcommand{\typetEE}{\type{t\type{ee}}}
\newcommand{\typetET}{\type{t\type{et}}}
\newcommand{\typetES}{\type{t\type{es}}}
\newcommand{\typetSS}{\type{t\type{ss}}}
\newcommand{\typetSE}{\type{t\type{se}}}
\newcommand{\typetST}{\type{t\type{st}}}
\newcommand{\typeTTt}{\type{\type{tt}t}}
\newcommand{\typeTTs}{\type{\type{tt}s}}
\newcommand{\typeTTe}{\type{\type{tt}e}}
\newcommand{\typeTEe}{\type{\type{te}e}}
\newcommand{\typeTEt}{\type{\type{te}t}}
\newcommand{\typeTEs}{\type{\type{te}s}}
\newcommand{\typeTSs}{\type{\type{ts}s}}
\newcommand{\typeTSe}{\type{\type{ts}e}}
\newcommand{\typeTSt}{\type{\type{ts}t}}

\let\typesleETr\@fglsundefined
\let\typeretETlt\@fglsundefined
\let\typeetrETtl\@fglsundefined
\newcommand{\typesleETr}{\type{s\type{e\type{et}}}}
\newcommand{\typeretETlt}{\type{\type{\type{et}\type{et}}t}}
\newcommand{\typeetrETtl}{\type{\type{et}\type{\type{et}t}}}



% ------------------------------
% colors
% ------------------------------

\definecolor{fglcpcolor0}{RGB}{186, 033, 033} % Level 4
\definecolor{fglcpcolor1}{RGB}{000, 000, 000} % Level 0
\definecolor{fglcpcolor2}{RGB}{0, 225, 225} % Level 1
\definecolor{fglcpcolor3}{RGB}{170, 034, 255} % Level 2
\definecolor{fglcpcolor4}{RGB}{156, 194, 50}  % Level 3
\definecolor{fglcpcolor5}{RGB}{000, 204, 000} % Level 3

\definecolor{dunkelgrau}{rgb}{0.72,0.72,0.72}
\definecolor{grau}{rgb}{0.85,0.85,0.85}
\definecolor{hellgrau}{rgb}{0.95,0.95,0.95}
\definecolor{deivationrowcountcolor}{rgb}{0.72,0.72,0.72}

% ------------------------------------------------------------
% Commands
% ------------------------------------------------------------
% ------------------------------
% Text
% ------------------------------
\let\oO\@fglsundefined
\let\oo\@fglsundefined
\newcommand{\oO}[1]{\setlength{\ULdepth}{-2.5ex}\uuline{#1}}
\newcommand{\oo}[2][-2ex]{\setlength{\ULdepth}{#1}\uuline{#2}}

\let\obl\@fglsundefined
\let\obli\@fglsundefined
\let\obla\@fglsundefined
\let\oblA\@fglsundefined
\let\oblia\@fglsundefined
\let\mel\@fglsundefined
\let\meli\@fglsundefined
\let\mela\@fglsundefined
\let\melA\@fglsundefined
\let\melia\@fglsundefined
\let\meliA\@fglsundefined
\newcommand{\obl}[1]{\textbf{#1}}
\newcommand{\obli}[1]{\textit{\textbf{#1}}}
\NewDocumentCommand{\obla}{m O{} O{} O{} O{} O{} O{} O{} O{}}{(\textbf{#1})\ifempty{#2}\else(\textbf{#2})\fi\ifempty{#3}\else(\textbf{#3})\fi\ifempty{#4}\else(\textbf{#4})\fi\ifempty{#5}\else(\textbf{#5})\fi\ifempty{#6}\else(\textbf{#6})\fi\ifempty{#7}\else(\textbf{#7})\fi\ifempty{#8}\else(\textbf{#8})\fi\ifempty{#9}\else(\textbf{#9})\fi}
\NewDocumentCommand{\oblA}{m O{} O{} O{} O{} O{} O{} O{} O{}}{\obl{(}\textbf{#1}\obl{)}\ifempty{#2}\else\obl{(}\textbf{#2}\obl{)}\fi\ifempty{#3}\else\obl{(}\textbf{#3}\obl{)}\fi\ifempty{#4}\else\obl{(}\textbf{#4}\obl{)}\fi\ifempty{#5}\else\obl{(}\textbf{#5}\obl{)}\fi\ifempty{#6}\else\obl{(}\textbf{#6}\obl{)}\fi\ifempty{#7}\else\obl{(}\textbf{#7}\obl{)}\fi\ifempty{#8}\else\obl{(}\textbf{#8}\obl{)}\fi\ifempty{#9}\else\obl{(}\textbf{#9}\obl{)}\fi}
\NewDocumentCommand{\oblia}{m O{} O{} O{} O{} O{} O{} O{} O{}}{\obl{(}\obli{#1}\obl{)}\ifempty{#2}\else\obl{(}\obli{#2}\obl{)}\fi\ifempty{#3}\else\obl{(}\obli{#3}\obl{)}\fi\ifempty{#4}\else\obl{(}\obli{#4}\obl{)}\fi\ifempty{#5}\else\obl{(}\obli{#5}\obl{)}\fi\ifempty{#6}\else\obl{(}\obli{#6}\obl{)}\fi\ifempty{#7}\else\obl{(}\obli{#7}\obl{)}\fi\ifempty{#8}\else\obl{(}\obli{#8}\obl{)}\fi\ifempty{#9}\else\obl{(}\obli{#9}\obl{)}\fi}
\newcommand{\mel}[1]{\text{#1}}
\newcommand{\meli}[1]{\text{\textit{#1}}}
\NewDocumentCommand{\mela}{m O{} O{} O{} O{} O{} O{} O{} O{}}{(\mel{#1})\ifempty{#2}\else(\mel{#2})\fi\ifempty{#3}\else(\mel{#3})\fi\ifempty{#4}\else(\mel{#4})\fi\ifempty{#5}\else(\mel{#5})\fi\ifempty{#6}\else(\mel{#6})\fi\ifempty{#7}\else(\mel{#7})\fi\ifempty{#8}\else(\mel{#8})\fi\ifempty{#9}\else(\mel{#9})\fi}
\NewDocumentCommand{\melA}{m O{} O{} O{} O{} O{} O{} O{} O{}}{\obl{(}\mel{#1}\obl{)}\ifempty{#2}\else\obl{(}\mel{#2}\obl{)}\fi\ifempty{#3}\else\obl{(}\mel{#3}\obl{)}\fi\ifempty{#4}\else\obl{(}\mel{#4}\obl{)}\fi\ifempty{#5}\else\obl{(}\mel{#5}\obl{)}\fi\ifempty{#6}\else\obl{(}\mel{#6}\obl{)}\fi\ifempty{#7}\else\obl{(}\mel{#7}\obl{)}\fi\ifempty{#8}\else\obl{(}\mel{#8}\obl{)}\fi\ifempty{#9}\else\obl{(}\mel{#9}\obl{)}\fi}
\NewDocumentCommand{\melia}{m O{} O{} O{} O{} O{} O{} O{} O{}}{\obl{(}\meli{#1}\obl{)}\ifempty{#2}\else\obl{(}\meli{#2}\obl{)}\fi\ifempty{#3}\else\obl{(}\meli{#3}\obl{)}\fi\ifempty{#4}\else\obl{(}\meli{#4}\obl{)}\fi\ifempty{#5}\else\obl{(}\meli{#5}\obl{)}\fi\ifempty{#6}\else\obl{(}\meli{#6}\obl{)}\fi\ifempty{#7}\else\obl{(}\meli{#7}\obl{)}\fi\ifempty{#8}\else\obl{(}\meli{#8}\obl{)}\fi\ifempty{#9}\else\obl{(}\meli{#9}\obl{)}\fi}
\NewDocumentCommand{\meliA}{m O{} O{} O{} O{} O{} O{} O{} O{}}{(\meli{#1})\ifempty{#2}\else(\meli{#2})\fi\ifempty{#3}\else(\meli{#3})\fi\ifempty{#4}\else(\meli{#4})\fi\ifempty{#5}\else(\meli{#5})\fi\ifempty{#6}\else(\meli{#6})\fi\ifempty{#7}\else(\meli{#7})\fi\ifempty{#8}\else(\meli{#8})\fi\ifempty{#9}\else(\meli{#9})\fi}

% ------------------------------
% Encapsulation
% ------------------------------

\let\zit\@fglsundefined
\let\her\@fglsundefined
\newcommand{\zit}[1]{``#1''}				
\newcommand{\her}[1]{`#1'}						

%% Brackets
\let\set\@fglsundefined
\let\cset\@fglsundefined
\let\seT\@fglsundefined
\let\bool\@fglsundefined
\let\booL\@fglsundefined
\let\lambby\@fglsundefined
\let\lambbY\@fglsundefined
\newcommand{\set}[2][x]{\{\ensuremath{#1} : #2\}}
\newcommand{\seT}[2][x]{\obl{\{}\ensuremath{#1} \obl{:} #2\obl{\}}}
\NewDocumentCommand{\cset}{m O{} O{\sstar}}{\ensuremath{#1_\text{#3}^\text{#2}}}
\newcommand{\bool}[1]{\ensuremath{\vdash}#1\ensuremath{\dashv}}
\newcommand{\booL}[1]{\ensuremath{\bm{\vdash}}#1\ensuremath{\bm{\dashv}}}

\NewDocumentCommand{\lambby}{O{} O{} m}{\ensuremath{[_{#1}}\ifempty{#1}\else\ \fi#3\ensuremath{]_{#2}}}
\NewDocumentCommand{\lambbY}{O{} O{} m}{\textbf{[}\ensuremath{_{#1}}\ifempty{#1}\else\ \fi#3\textbf{]}\ensuremath{_{#2}}}

% ------------------------------
% Logic (nc = no notational convention)
% ------------------------------

\let\sneg\@fglsundefined
\let\sneG\@fglsundefined
\let\simp\@fglsundefined
\let\simP\@fglsundefined
\let\simpnC\@fglsundefined
\let\soR\@fglsundefined
\let\sor\@fglsundefined
\let\sanD\@fglsundefined
\let\sand\@fglsundefined
\let\sandnc\@fglsundefined
\let\sandnC\@fglsundefined
\let\sornc\@fglsundefined
\let\sornC\@fglsundefined
\newcommand{\sneg}{\ensuremath{\neg}}
\newcommand{\sneG}{\ensuremath{\bm{\neg}}}
\NewDocumentCommand{\simp}{m m}{#1 \ensuremath{\rightarrow} #2}
\NewDocumentCommand{\simP}{m m}{#1 \ensuremath{\bm{\rightarrow}} #2}
\NewDocumentCommand{\simpnc}{m m}{\ensuremath{\rightarrow}(#1)(#2)}
\NewDocumentCommand{\simpnC}{m m}{\ensuremath{\bm{\rightarrow}}\obl{(}#1\obl{)}\obl{(}#2\obl{)}}
\NewDocumentCommand{\soR}{m m O{} O{} O{} O{} O{} O{} O{}}{#1 \ensuremath{\bm{\lor}} #2\ifempty{#3}\else\ \ensuremath{\bm{\lor}} #3\fi\ifempty{#4}\else\ \ensuremath{\bm{\lor}} #4\fi\ifempty{#5}\else\ \ensuremath{\bm{\lor}} #5\fi\ifempty{#6}\else\ \ensuremath{\bm{\lor}} #6\fi\ifempty{#7}\else\ \ensuremath{\bm{\lor}} #7\fi\ifempty{#8}\else\ \ensuremath{\bm{\lor}} #8\fi\ifempty{#9}\else\ \ensuremath{\bm{\lor}} #9\fi
}
\NewDocumentCommand{\sor}{m m O{} O{} O{} O{} O{} O{} O{}}{#1 \ensuremath{\lor} #2\ifempty{#3}\else\ \ensuremath{\lor} #3\fi\ifempty{#4}\else\ \ensuremath{\lor} #4\fi\ifempty{#5}\else\ \ensuremath{\lor} #5\fi\ifempty{#6}\else\ \ensuremath{\lor} #6\fi\ifempty{#7}\else\ \ensuremath{\lor} #7\fi\ifempty{#8}\else\ \ensuremath{\lor} #8\fi\ifempty{#9}\else\ \ensuremath{\lor} #9\fi}
\NewDocumentCommand{\sanD}{m m O{} O{} O{} O{} O{} O{} O{}}{#1 \ensuremath{\bm{\land}} #2\ifempty{#3}\else\ \ensuremath{\bm{\land}} #3\fi\ifempty{#4}\else\ \ensuremath{\bm{\land}} #4\fi\ifempty{#5}\else\ \ensuremath{\bm{\land}} #5\fi\ifempty{#6}\else\ \ensuremath{\bm{\land}} #6\fi\ifempty{#7}\else\ \ensuremath{\bm{\land}} #7\fi\ifempty{#8}\else\ \ensuremath{\bm{\land}} #8\fi\ifempty{#9}\else\ \ensuremath{\bm{\land}} #9\fi}
\NewDocumentCommand{\sand}{m m O{} O{} O{} O{} O{} O{} O{}}{#1 \ensuremath{\land} #2\ifempty{#3}\else\ \ensuremath{\land} #3\fi\ifempty{#4}\else\ \ensuremath{\land} #4\fi\ifempty{#5}\else\ \ensuremath{\land} #5\fi\ifempty{#6}\else\ \ensuremath{\land} #6\fi\ifempty{#7}\else\ \ensuremath{\land} #7\fi\ifempty{#8}\else\ \ensuremath{\land}#8\fi\ifempty{#9}\else\ \ensuremath{\land} #9\fi}
\NewDocumentCommand{\sandnc}{m m O{} O{} O{} O{} O{} O{} O{}}{\ensuremath{\land}\mela{#1}[#2][#3][#4][#5][#6][#7][#8][#9]}
\NewDocumentCommand{\sandnC}{m m O{} O{} O{} O{} O{} O{} O{}}{\ensuremath{\bm{\land}}\oblA{#1}[#2][#3][#4][#5][#6][#7][#8][#9]}
\NewDocumentCommand{\sornc}{m m O{} O{} O{} O{} O{} O{} O{}}{\ensuremath{\lor}\mela{#1}[#2][#3][#4][#5][#6][#7][#8][#9]}

\NewDocumentCommand{\sornC}{m m O{} O{} O{} O{} O{} O{} O{}}{\ensuremath{\bm{\lor}}\obla{#1}[#2][#3][#4][#5][#6][#7][#8][#9]}

% ------------------------------
% Lambda
% ------------------------------

% General Lambda Functions
%% Extension
\let\lambfx\@fglsundefined
\let\lambfX\@fglsundefined
\let\lambfyx\@fglsundefined
\let\lambfyX\@fglsundefined
\let\lambfzyx\@fglsundefined
\let\lambfzyX\@fglsundefined
\NewDocumentCommand{\lambfx}{m O{x} O{}}{\lambh{#2}[#3]\bool{#1}}
\NewDocumentCommand{\lambfX}{m O{x} O{}}{\lambH{#2}[#3]\booL{#1}}
\NewDocumentCommand{\lambfyx}{m O{y} O{x} O{} O{}}{\lambh{#2}[#4]\lambh{#3}[#5]\bool{#1}}
\NewDocumentCommand{\lambfyX}{m O{y} O{x} O{} O{}}{\lambH{#2}[#4]\lambH{#3}[#5]\booL{#1}}
\NewDocumentCommand{\lambfzyx}{m O{z} O{y} O{x} O{} O{} O{}}{\lambh{#2}[#5]\lambh{#3}[#6]\lambh{#4}[#7]\bool{#1}}
\NewDocumentCommand{\lambfzyX}{m O{z} O{y} O{x} O{} O{} O{}}{\lambH{#2}[#5]\lambH{#3}[#6]\lambH{#4}[#7]\booL{#1}}
%% Intension
\let\lambfsx\@fglsundefined
\let\lambfsX\@fglsundefined
\let\lambfsyx\@fglsundefined
\let\lambfsyX\@fglsundefined
\let\lambfszyx\@fglsundefined
\let\lambfszyX\@fglsundefined
\NewDocumentCommand{\lambfsx}{m O{x} O{s} O{} O{}}{\lambh{#3}[#5]\lambh{#2}[#4]\bool{#1}}
\NewDocumentCommand{\lambfsX}{m O{x} O{s} O{} O{}}{\lambH{#3}[#4]\lambH{#2}[#4]\booL{#1}}
\NewDocumentCommand{\lambfsyx}{m O{y} O{x} O{s} O{} O{} O{}}{\lambh{#4}[#7]\lambh{#2}[#5]\lambh{#3}[#6]\bool{#1}}
\NewDocumentCommand{\lambfsyX}{m O{y} O{x} O{s} O{} O{} O{}}{\lambH{#4}[#7]\lambh{#2}[#5]\lambH{#3}[#6]\booL{#1}}
\NewDocumentCommand{\lambfszyx}{m O{z} O{y} O{x} O{s} O{} O{} O{} O{}}{\lambh{#5}[#9]\lambh{#2}[#6]\lambh{#3}[#7]\lambh{#4}[#8]\bool{#1}}
\NewDocumentCommand{\lambfszyX}{m O{z} O{y} O{x} O{s} O{} O{} O{} O{}}{\lambH{#5}[#9]\lambh{#2}[#6]\lambH{#3}[#7]\lambH{#4}[#8]\booL{#1}}

%% Lambda Heads
\let\lambh\@fglsundefined
\let\lambH\@fglsundefined
\let\lambhe\@fglsundefined
\let\lambhE\@fglsundefined
\let\lambha\@fglsundefined
\let\lambhA\@fglsundefined
\let\lambhen\@fglsundefined
\let\lambheN\@fglsundefined
\let\lambhan\@fglsundefined
\let\lambhaN\@fglsundefined
\NewDocumentCommand{\lambh}{m O{}}{\ensuremath{\lambda\textit{#1}}\ifempty{#2}\else\textsubscript{#2}\fi\ifempty{#2}\else\!\fi.}
\NewDocumentCommand{\lambH}{m O{}}{\ensuremath{\bm{\lambda #1}}\ifempty{#2}\else\!\textsubscript{#2}\fi\ifempty{#2}\else\!\fi\obl{.}}
\NewDocumentCommand{\lambhe}{ O{x} O{\@typee}}{\obl{(}\ensuremath{\exists}\ensuremath{#1}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambhE}{ O{x} O{\@typee}}{\obl{(}\ensuremath{\bm{\exists}}\textbf{\ensuremath{#1}}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambha}{ O{x} O{\@typee}}{\obl{(}\ensuremath{\forall}\ensuremath{#1}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambhA}{ O{x} O{\@typee}}{\obl{(}\ensuremath{\bm{\forall}}\textbf{\ensuremath{#1}}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambhen}{ O{x} O{\@typee}}{\ensuremath{\neg}\obl{(}\ensuremath{\exists}\ensuremath{#1}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambheN}{ O{x} O{\@typee}}{\ensuremath{\bm{\neg}}\obl{(}\ensuremath{\bm{\exists}}\textbf{\ensuremath{#1}}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambhan}{ O{x} O{\@typee}}{\ensuremath{\neg}\obl{(}\ensuremath{\forall}\ensuremath{#1}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}
\NewDocumentCommand{\lambhaN}{ O{x} O{\@typee}}{\ensuremath{\bm{\neg}}\obl{(}\ensuremath{\bm{\forall}}\textbf{\ensuremath{#1}}\ifempty{#2}\else\!\fi\textsubscript{#2}\!\obl{)}}

%% Lambda Heads Basics
\let\lmda\@fglsundefined
\let\lmDa\@fglsundefined
\let\lmdA\@fglsundefined
\let\lmDA\@fglsundefined
\let\lmdb\@fglsundefined
\let\lmDb\@fglsundefined
\let\lmdB\@fglsundefined
\let\lmDB\@fglsundefined
\let\lmdc\@fglsundefined
\let\lmDc\@fglsundefined
\let\lmdC\@fglsundefined
\let\lmDC\@fglsundefined
\let\lmdd\@fglsundefined
\let\lmDd\@fglsundefined
\let\lmdD\@fglsundefined
\let\lmDD\@fglsundefined
\let\lmde\@fglsundefined
\let\lmDe\@fglsundefined
\let\lmdE\@fglsundefined
\let\lmDE\@fglsundefined
\let\lmdf\@fglsundefined
\let\lmDf\@fglsundefined
\let\lmdF\@fglsundefined
\let\lmDF\@fglsundefined
\let\lmdg\@fglsundefined
\let\lmDg\@fglsundefined
\let\lmdG\@fglsundefined
\let\lmDG\@fglsundefined
\let\lmdh\@fglsundefined
\let\lmDh\@fglsundefined
\let\lmdH\@fglsundefined
\let\lmDH\@fglsundefined
\let\lmdi\@fglsundefined
\let\lmDi\@fglsundefined
\let\lmdI\@fglsundefined
\let\lmDI\@fglsundefined
\let\lmdj\@fglsundefined
\let\lmDj\@fglsundefined
\let\lmdJ\@fglsundefined
\let\lmDJ\@fglsundefined
\let\lmdk\@fglsundefined
\let\lmDk\@fglsundefined
\let\lmdK\@fglsundefined
\let\lmDK\@fglsundefined
\let\lmdl\@fglsundefined
\let\lmDl\@fglsundefined
\let\lmdL\@fglsundefined
\let\lmDL\@fglsundefined
\let\lmdm\@fglsundefined
\let\lmDm\@fglsundefined
\let\lmdM\@fglsundefined
\let\lmDM\@fglsundefined
\let\lmdn\@fglsundefined
\let\lmDn\@fglsundefined
\let\lmdN\@fglsundefined
\let\lmDN\@fglsundefined
\let\lmdo\@fglsundefined
\let\lmDo\@fglsundefined
\let\lmdO\@fglsundefined
\let\lmDO\@fglsundefined
\let\lmdp\@fglsundefined
\let\lmDp\@fglsundefined
\let\lmdP\@fglsundefined
\let\lmDP\@fglsundefined
\let\lmdq\@fglsundefined
\let\lmDq\@fglsundefined
\let\lmdQ\@fglsundefined
\let\lmDQ\@fglsundefined
\let\lmdr\@fglsundefined
\let\lmDr\@fglsundefined
\let\lmdR\@fglsundefined
\let\lmDR\@fglsundefined
\let\lmds\@fglsundefined
\let\lmDs\@fglsundefined
\let\lmdS\@fglsundefined
\let\lmDS\@fglsundefined
\let\lmdt\@fglsundefined
\let\lmDt\@fglsundefined
\let\lmdT\@fglsundefined
\let\lmDT\@fglsundefined
\let\lmdu\@fglsundefined
\let\lmDu\@fglsundefined
\let\lmdU\@fglsundefined
\let\lmDU\@fglsundefined
\let\lmdv\@fglsundefined
\let\lmDv\@fglsundefined
\let\lmdV\@fglsundefined
\let\lmDV\@fglsundefined
\let\lmdw\@fglsundefined
\let\lmDw\@fglsundefined
\let\lmdW\@fglsundefined
\let\lmDW\@fglsundefined
\let\lmdx\@fglsundefined
\let\lmDx\@fglsundefined
\let\lmdX\@fglsundefined
\let\lmDX\@fglsundefined
\let\lmdy\@fglsundefined
\let\lmDy\@fglsundefined
\let\lmdY\@fglsundefined
\let\lmDY\@fglsundefined
\let\lmdz\@fglsundefined
\let\lmDz\@fglsundefined
\let\lmdZ\@fglsundefined
\let\lmDZ\@fglsundefined
\newcommand{\lmda}[1][]{\lambh{a}[#1]}
\newcommand{\lmDa}[1][]{\lambH{a}[#1]}
\newcommand{\lmdA}[1][]{\lambh{A}[#1]}
\newcommand{\lmDA}[1][]{\lambH{A}[#1]}
\newcommand{\lmdb}[1][]{\lambh{b}[#1]}
\newcommand{\lmDb}[1][]{\lambH{b}[#1]}
\newcommand{\lmdB}[1][]{\lambh{B}[#1]}
\newcommand{\lmDB}[1][]{\lambH{B}[#1]}
\newcommand{\lmdc}[1][]{\lambh{c}[#1]}
\newcommand{\lmDc}[1][]{\lambH{c}[#1]}
\newcommand{\lmdC}[1][]{\lambh{C}[#1]}
\newcommand{\lmDC}[1][]{\lambH{C}[#1]}
\newcommand{\lmdd}[1][]{\lambh{d}[#1]}
\newcommand{\lmDd}[1][]{\lambH{d}[#1]}
\newcommand{\lmdD}[1][]{\lambh{D}[#1]}
\newcommand{\lmDD}[1][]{\lambH{D}[#1]}
\newcommand{\lmde}[1][]{\lambh{e}[#1]}
\newcommand{\lmDe}[1][]{\lambH{e}[#1]}
\newcommand{\lmdE}[1][]{\lambh{E}[#1]}
\newcommand{\lmDE}[1][]{\lambH{E}[#1]}
\newcommand{\lmdf}[1][]{\lambh{f}[#1]}
\newcommand{\lmDf}[1][]{\lambH{f}[#1]}
\newcommand{\lmdF}[1][]{\lambh{F}[#1]}
\newcommand{\lmDF}[1][]{\lambH{F}[#1]}
\newcommand{\lmdg}[1][]{\lambh{g}[#1]}
\newcommand{\lmDg}[1][]{\lambH{g}[#1]}
\newcommand{\lmdG}[1][]{\lambh{G}[#1]}
\newcommand{\lmDG}[1][]{\lambH{G}[#1]}
\newcommand{\lmdh}[1][]{\lambh{h}[#1]}
\newcommand{\lmDh}[1][]{\lambH{h}[#1]}
\newcommand{\lmdH}[1][]{\lambh{H}[#1]}
\newcommand{\lmDH}[1][]{\lambH{H}[#1]}
\newcommand{\lmdi}[1][]{\lambh{i}[#1]}
\newcommand{\lmDi}[1][]{\lambH{i}[#1]}
\newcommand{\lmdI}[1][]{\lambh{I}[#1]}
\newcommand{\lmDI}[1][]{\lambH{I}[#1]}
\newcommand{\lmdj}[1][]{\lambh{j}[#1]}
\newcommand{\lmDj}[1][]{\lambH{j}[#1]}
\newcommand{\lmdJ}[1][]{\lambh{J}[#1]}
\newcommand{\lmDJ}[1][]{\lambH{J}[#1]}
\newcommand{\lmdk}[1][]{\lambh{k}[#1]}
\newcommand{\lmDk}[1][]{\lambH{k}[#1]}
\newcommand{\lmdK}[1][]{\lambh{K}[#1]}
\newcommand{\lmDK}[1][]{\lambH{K}[#1]}
\newcommand{\lmdl}[1][]{\lambh{l}[#1]}
\newcommand{\lmDl}[1][]{\lambH{l}[#1]}
\newcommand{\lmdL}[1][]{\lambh{L}[#1]}
\newcommand{\lmDL}[1][]{\lambH{L}[#1]}
\newcommand{\lmdm}[1][]{\lambh{m}[#1]}
\newcommand{\lmDm}[1][]{\lambH{m}[#1]}
\newcommand{\lmdM}[1][]{\lambh{M}[#1]}
\newcommand{\lmDM}[1][]{\lambH{M}[#1]}
\newcommand{\lmdn}[1][]{\lambh{n}[#1]}
\newcommand{\lmDn}[1][]{\lambH{n}[#1]}
\newcommand{\lmdN}[1][]{\lambh{N}[#1]}
\newcommand{\lmDN}[1][]{\lambH{N}[#1]}
\newcommand{\lmdo}[1][]{\lambh{o}[#1]}
\newcommand{\lmDo}[1][]{\lambH{o}[#1]}
\newcommand{\lmdO}[1][]{\lambh{O}[#1]}
\newcommand{\lmDO}[1][]{\lambH{O}[#1]}
\newcommand{\lmdp}[1][]{\lambh{p}[#1]}
\newcommand{\lmDp}[1][]{\lambH{p}[#1]}
\newcommand{\lmdP}[1][]{\lambh{P}[#1]}
\newcommand{\lmDP}[1][]{\lambH{P}[#1]}
\newcommand{\lmdq}[1][]{\lambh{q}[#1]}
\newcommand{\lmDq}[1][]{\lambH{q}[#1]}
\newcommand{\lmdQ}[1][]{\lambh{Q}[#1]}
\newcommand{\lmDQ}[1][]{\lambH{Q}[#1]}
\newcommand{\lmdr}[1][]{\lambh{r}[#1]}
\newcommand{\lmDr}[1][]{\lambH{r}[#1]}
\newcommand{\lmdR}[1][]{\lambh{R}[#1]}
\newcommand{\lmDR}[1][]{\lambH{R}[#1]}
\newcommand{\lmds}[1][]{\lambh{s}[#1]}
\newcommand{\lmDs}[1][]{\lambH{s}[#1]}
\newcommand{\lmdS}[1][]{\lambh{S}[#1]}
\newcommand{\lmDS}[1][]{\lambH{S}[#1]}
\newcommand{\lmdt}[1][]{\lambh{t}[#1]}
\newcommand{\lmDt}[1][]{\lambH{t}[#1]}
\newcommand{\lmdT}[1][]{\lambh{T}[#1]}
\newcommand{\lmDT}[1][]{\lambH{T}[#1]}
\newcommand{\lmdu}[1][]{\lambh{u}[#1]}
\newcommand{\lmDu}[1][]{\lambH{u}[#1]}
\newcommand{\lmdU}[1][]{\lambh{U}[#1]}
\newcommand{\lmDU}[1][]{\lambH{U}[#1]}
\newcommand{\lmdv}[1][]{\lambh{v}[#1]}
\newcommand{\lmDv}[1][]{\lambH{v}[#1]}
\newcommand{\lmdV}[1][]{\lambh{V}[#1]}
\newcommand{\lmDV}[1][]{\lambH{V}[#1]}
\newcommand{\lmdw}[1][]{\lambh{w}[#1]}
\newcommand{\lmDw}[1][]{\lambH{w}[#1]}
\newcommand{\lmdW}[1][]{\lambh{W}[#1]}
\newcommand{\lmDW}[1][]{\lambH{W}[#1]}
\newcommand{\lmdx}[1][]{\lambh{x}[#1]}
\newcommand{\lmDx}[1][]{\lambH{x}[#1]}
\newcommand{\lmdX}[1][]{\lambh{X}[#1]}
\newcommand{\lmDX}[1][]{\lambH{X}[#1]}
\newcommand{\lmdy}[1][]{\lambh{y}[#1]}
\newcommand{\lmDy}[1][]{\lambH{y}[#1]}
\newcommand{\lmdY}[1][]{\lambh{Y}[#1]}
\newcommand{\lmDY}[1][]{\lambH{Y}[#1]}
\newcommand{\lmdz}[1][]{\lambh{z}[#1]}
\newcommand{\lmDz}[1][]{\lambH{z}[#1]}
\newcommand{\lmdZ}[1][]{\lambh{Z}[#1]}
\newcommand{\lmDZ}[1][]{\lambH{Z}[#1]}

% ------------------------------
% Semantics
% ------------------------------
\let\sarrow\@fglsundefined
\NewDocumentCommand{\sarrow}{m}{\ensuremath{\downarrow}#1}
\NewDocumentCommand{\sarroW}{m}{\ensuremath{\downarrow}\lambby{#1}}



%%% Indirekt
\let\sic\@fglsundefined
\let\siC\@fglsundefined
\let\sicN\@fglsundefined
\let\sicn\@fglsundefined
\let\siCN\@fglsundefined
\let\siCn\@fglsundefined
\newcommand{\sic}[2][\bm{i}]{\text{\obl{#2}\textsubscript{\ensuremath{#1}}}}
\newcommand{\siC}[2][\bm{i}]{\text{\obl{#2}\obl{(}\ensuremath{#1}\obl{)}}}
\newcommand{\sicN}[2][\bm{i}]{\ensuremath{\bm{\neg}}\text{\obl{#2}\textsubscript{\ensuremath{#1}}}}
\newcommand{\sicn}[2][\bm{i}]{\ensuremath{\neg}\text{\obl{#2}\textsubscript{\ensuremath{#1}}}}
\newcommand{\siCN}[2][\bm{i}]{\ensuremath{\bm{\neg}}\text{\obl{#2}\obl{(}\ensuremath{#1}\obl{)}}}
\newcommand{\siCn}[2][\bm{i}]{\ensuremath{\neg}\text{\obl{#2}\obl{(}\ensuremath{#1}\obl{)}}}

\let\sit\@fglsundefined
\let\siT\@fglsundefined
\newcommand{\sit}[1]{\ensuremath{|}\obl{#1}\ensuremath{|}}
\newcommand{\siT}[1]{\ensuremath{\bm{|}}\obl{#1}\ensuremath{\bm{|}}}

\let\sitnobf\@fglsundefined
\let\sitnobF\@fglsundefined
\let\sitnobfi\@fglsundefined
\let\sitnobfI\@fglsundefined
\newcommand{\sitnobf}[1]{\ensuremath{|}#1\ensuremath{|}}
\newcommand{\sitnobF}[1]{\ensuremath{\bm{|}}#1\ensuremath{\bm{|}}}
\newcommand{\sitnobfi}[1]{\ensuremath{|}\textit{#1}\ensuremath{|}}
\newcommand{\sitnobfI}[1]{\ensuremath{\bm{|}}\textit{#1}\ensuremath{\bm{|}}}

\let\sid\@fglsundefined
\let\siD\@fglsundefined
\let\sidg\@fglsundefined
\let\sidG\@fglsundefined
\newcommand{\sid}[2][]{\ensuremath{\parallel}\obl{#2}\ensuremath{\parallel}\textsuperscript{\!\ensuremath{#1}}}
\newcommand{\siD}[2][]{\ensuremath{\bm{\parallel}}\obl{#2}\ensuremath{\bm{\parallel}}\textsuperscript{\!\ensuremath{#1}}}
\newcommand{\sidg}[2][]{\ensuremath{\parallel}\obl{#2}\ensuremath{\parallel}\textsuperscript{\!\ensuremath{g\!#1}}}
\newcommand{\sidG}[2][]{\ensuremath{\bm{\parallel}}\obl{#2}\ensuremath{\bm{\parallel}}\textsuperscript{\!\ensuremath{g\!#1}}}

\let\asmod\@fglsundefined
\let\asmoD\@fglsundefined
\NewDocumentCommand{\asmod}{m O{x}}{\ensuremath{\lbrack\nicefrac{#2}{\!#1}\rbrack}}
\NewDocumentCommand{\asmoD}{m O{x}}{\ensuremath{\lbrack\nicefrac{\obli{#2}}{\!#1}\rbrack}}

\let\asf\@fglsundefined
\let\asF\@fglsundefined
\NewDocumentCommand{\asf}{m O{} O{x} O{} O{y} O{} O{z} O{g}}{\ensuremath{#8}\ifempty{#2}\else\asmod{#2}[#3]\fi\ifempty{#4}\else\asmod{#4}[#5]\fi\ifempty{#6}\else\asmod{#6}[#7]\fi\mel{(}#1\mel{)}}
\NewDocumentCommand{\asF}{m O{} O{x} O{} O{y} O{} O{z} O{g}}{\ensuremath{#8}\ifempty{#2}\else\asmoD{#2}[#3]\fi\ifempty{#4}\else\asmoD{#4}[#5]\fi\ifempty{#6}\else\asmoD{#6}[#7]\fi\obl{(}#1\obl{)}}

\let\@fglAssRep\@fglsundefined
\let\@fglAssReP\@fglsundefined
\let\@fglSidModCheck\@fglsundefined
\let\@fglSidModChecK\@fglsundefined
\newcommand{\@fglAssRep}[2]{\ensuremath{\lbrack\nicefrac{#1}{\!#2}\rbrack}}
\newcommand{\@fglAssReP}[2]{\@fglAssRep{\obli{#1}}{#2}}
\newcommand{\@fglSidModCheck}[2]{\ifempty{#1}\else\!\@fglAssRep{#1}{#2}\fi}
\newcommand{\@fglSidModChecK}[2]{\ifempty{#1}\else\!\@fglAssReP{#1}{#2}\fi}

\let\sidmod\@fglsundefined
\let\sidmoD\@fglsundefined
\let\sidmOd\@fglsundefined
\let\sidmOD\@fglsundefined
\NewDocumentCommand{\sidmod}{m m O{x} O{} O{y} O{} O{z} O{g}}{\sid[#8\!\@fglAssRep{#3}{#2}\@fglSidModCheck{#5}{#4}\@fglSidModCheck{#7}{#6}]{#1}}
\NewDocumentCommand{\sidmoD}{m m O{x} O{} O{y} O{} O{z} O{g}}{\sid[#8\!\@fglAssReP{#3}{#2}\@fglSidModChecK{#5}{#4}\@fglSidModChecK{#7}{#6}]{#1}}
\NewDocumentCommand{\sidmOd}{m m O{x} O{} O{y} O{} O{z} O{g}}{\siD[#8\!\@fglAssRep{#3}{#2}\@fglSidModCheck{#5}{#4}\@fglSidModCheck{#7}{#6}]{#1}}
\NewDocumentCommand{\sidmOD}{m m O{x} O{} O{y} O{} O{z} O{g}}{\siD[#8\!\@fglAssReP{#3}{#2}\@fglSidModChecK{#5}{#4}\@fglSidModChecK{#7}{#6}]{#1}}

\let\sidr\@fglsundefined
\let\sidR\@fglsundefined
\let\siDr\@fglsundefined
\let\siDR\@fglsundefined
\let\sidrr\@fglsundefined
\let\sidRR\@fglsundefined
\let\siDrr\@fglsundefined
\let\siDRR\@fglsundefined
\let\sidrrr\@fglsundefined
\let\sidRRR\@fglsundefined
\let\siDrrr\@fglsundefined
\let\siDRRR\@fglsundefined
\NewDocumentCommand{\sidr}{m m O{x} O{g}}{\sid[#4\!\@fglAssRep{#3}{#2}]{#1}}
\NewDocumentCommand{\sidR}{m m O{x} O{g}}{\sid[#4\!\@fglAssReP{#3}{#2}]{#1}}
\NewDocumentCommand{\siDr}{m m O{x} O{g}}{\siD[#4\!\@fglAssRep{#3}{#2}]{#1}}
\NewDocumentCommand{\siDR}{m m O{x} O{g}}{\siD[#4\!\@fglAssReP{#3}{#2}]{#1}}
\NewDocumentCommand{\sidrr}{m m m O{x} O{y} O{g}}{\sid[#6\!\@fglAssRep{#4}{#2}\!\@fglAssRep{#5}{#3}]{#1}}
\NewDocumentCommand{\sidRR}{m m m O{x} O{y} O{g}}{\sid[#6\!\@fglAssReP{#4}{#2}\!\@fglAssReP{#5}{#3}]{#1}}
\NewDocumentCommand{\siDrr}{m m m O{x} O{y} O{g}}{\siD[#6\!\@fglAssRep{#4}{#2}\!\@fglAssRep{#5}{#3}]{#1}}
\NewDocumentCommand{\siDRR}{m m m O{x} O{y} O{g}}{\siD[#6\!\@fglAssReP{#4}{#2}\!\@fglAssReP{#5}{#3}]{#1}}
\NewDocumentCommand{\sidrrr}{m m m m O{x} O{y} O{z} O{g}}{\sid[#8\!\@fglAssRep{#5}{#2}\!\@fglAssRep{#6}{#3}\!\@fglAssRep{#7}{#4}]{#1}}
\NewDocumentCommand{\sidRRR}{m m m m O{x} O{y} O{z} O{g}}{\sid[#8\!\@fglAssReP{#5}{#2}\!\@fglAssReP{#6}{#3}\!\@fglAssReP{#7}{#4}]{#1}}
\NewDocumentCommand{\siDrrr}{m m m m O{x} O{y} O{z} O{g}}{\siD[#8\!\@fglAssRep{#5}{#2}\!\@fglAssRep{#6}{#3}\!\@fglAssRep{#7}{#4}]{#1}}
\NewDocumentCommand{\siDRRR}{m m m m O{x} O{y} O{z} O{g}}{\siD[#8\!\@fglAssReP{#5}{#2}\!\@fglAssReP{#6}{#3}\!\@fglAssReP{#7}{#4}]{#1}}

%%% Direkt
\let\sdi\@fglsundefined
\let\sdI\@fglsundefined
\let\sde\@fglsundefined
\let\sdE\@fglsundefined
\newcommand{\sdi}[1]{\ensuremath{\llbracket}\obl{#1}\ensuremath{\rrbracket}}
\newcommand{\sdI}[1]{\pmb{\ensuremath{\llbracket}}\obl{#1}\pmb{\ensuremath{\rrbracket}}}
\newcommand{\sde}[2][\sstar]{\ensuremath{\llbracket}\obl{#2}\ensuremath{\rrbracket}\textsuperscript{\!\ensuremath{#1}}\!}
\newcommand{\sdem}[2][\sstar]{\ensuremath{\llbracket}\mel{#2}\ensuremath{\rrbracket}\textsuperscript{\!\ensuremath{#1}}\!}
\newcommand{\sdE}[2][\sstar]{\pmb{\ensuremath{\llbracket}}\obl{#2}\pmb{\ensuremath{\rrbracket}}\textsuperscript{\!\ensuremath{#1}}}

%%% Rules
\let\@srdesituation\FGL@rulesituation
%%%% General
\let\srgarrow\@fglsundefined
\NewDocumentCommand{\srgarrow}{O{\ensuremath{x}} O{\ensuremath{f}}}{\sarrow{#2} = \set[#1]{#2(#1)\ =\ 1}}
%%%% Direkt

\let\srde\@fglsundefined
\let\srdE\@fglsundefined
\let\srdi\@fglsundefined
\NewDocumentCommand{\srde}{m m O{\@srdesituation}}{\sde[#3]{#1}\ =\ #2}
\NewDocumentCommand{\srdE}{m m O{\@srdesituation}}{\sdE[#3]{#1}\ =\ #2}
\NewDocumentCommand{\srdi}{m m}{\sdi{#1}\ = #2}
%%%%% Basic	
\let\srdesbjpred\@fglsundefined
\let\srdesbjpreD\@fglsundefined
\let\srdeobjpred\@fglsundefined
\let\srdeobjpreD\@fglsundefined
\let\srdesbjquant\@fglsundefined
\let\srdesbjquanT\@fglsundefined
\let\srdequant\@fglsundefined
\let\srdequanT\@fglsundefined
\NewDocumentCommand{\srdesbjpred}{O{\@srdesituation} O{\text{\ensuremath{S}}} O{\text{\ensuremath{NN}}} O{\text{\ensuremath{P}}}}{\srde{#2}{\sde[#1]{#4}(\sde[#1]{#3})}[#1]}
\NewDocumentCommand{\srdeobjpred}{O{\@srdesituation} O{\text{\ensuremath{P}}} O{\text{\ensuremath{NN}}} O{\text{\ensuremath{V}}}}{\srdesbjpred[#1][#2][#3][#4]}
\NewDocumentCommand{\srdesbjquant}{O{\@srdesituation} O{\text{\ensuremath{S}}} O{\text{\ensuremath{P}}} O{\text{\ensuremath{QN}}}}{\srdesbjpred[#1][#2][#3][#4]}
\NewDocumentCommand{\srdequant}{O{\@srdesituation} O{\text{\ensuremath{QN}}} O{\text{\ensuremath{N}}} O{\text{\ensuremath{D}}}}{\srdesbjpred[#1][#2][#3][#4]}
\NewDocumentCommand{\srdeobjquant}{O{x} O{y} O{\@srdesituation} O{\text{\ensuremath{P}}} O{\text{\ensuremath{V}}} O{\text{\ensuremath{QN}}} O{\@typee} O{\@typee}}{\srde{#4}{\lambh{#1}[#7]\sde[#3]{#6}(\lambh{#2}[#8]\sde[#3]{#5}(\textit{#2})(\textit{#1}))}[#3]}
	

%%%%% Quantorenanhebung
\let\srdeqrsemvar\@fglsundefined
\let\srdeqrabs\@fglsundefined
\let\srdeqrlex\@fglsundefined
\let\srdeqrfa\@fglsundefined
\let\srdeqrtree\@fglsundefined
\NewDocumentCommand{\srdeqrsemvar}{O{\phi} O{\ensuremath{x}} O{\sblank} O{\textit{g}}}{\srde{\ensuremath{#1}}{\ensuremath{#4}(#2)}[\ensuremath{#4},\!\ensuremath{#3}]}
\NewDocumentCommand{\srdeqrabs}{O{\phi} O{\textit{x}} O{\sblank} O{\textit{g}} O{\textit{f}} O{\ensuremath{\delta}}}{#5(#2)\ =\ \sde[#4\ensuremath{\lbrack\nicefrac{#6}{\!#2}\rbrack},\!#3]{\ensuremath{#1}}\ }
\NewDocumentCommand{\srdeqrlex}{O{\ensuremath{\alpha}} O{\ensuremath{\beta}} O{\sblank} O{\text{\textit{g}}}}{\srde{#1}{\sde[#3]{#2}}[#4,\!#3]}
\NewDocumentCommand{\srdeqrfa}{O{\ensuremath{\alpha}} O{\ensuremath{\beta}} O{\ensuremath{\gamma}} O{\sblank} O{\text{\textit{g}}}}{\srde{#1}{\sde[#5,\!#4]{#2}(\sde[#5,\!#4]{#3})}[#5,\!#4]}
\NewDocumentCommand{\srdeqrtree}{O{x} O{\ensuremath{\psi}} O{\ensuremath{\phi}} O{\ensuremath{\xi}} O{\sblank} O{\text{\textit{g}}} O{\@typee}}{\srde{#2}{\lambh{#1}[#7]\sde[#6\ensuremath{\lbrack\nicefrac{#4}{\!#1}\rbrack},\!#5]{#3}}[#6,\!#5]}


% ------------------------------------------------------------ 
% Environments
% ------------------------------------------------------------  

% ------------------------------
% Rainbow Brackets
% ------------------------------
\let\ifempty\@fglsundefined
\newcommand{\ifempty}[1]{\ifnum\pdf@strcmp{#1}{}=\z@}
\def\@fglstruncdiv#1#2{((#1-(#2-1)/2)/#2)}
\def\@fglsmoduloop#1#2{(#1-\@fglstruncdiv{#1}{#2}*#2)}
\def\@fglsmodulo#1#2{\number\numexpr\@fglsmoduloop{#1}{#2}\relax}

\newcommand\@fglsrainbow[1]{%
	\ifcase\@fglsmodulo{\the\value{@fglsparenscounter}} 5\relax%
	\textcolor{fglcpcolor0}{\textbf{#1}}%
	\or
	\textcolor{fglcpcolor1}{\textbf{#1}}%
	\or
	\textcolor{fglcpcolor2}{\textbf{#1}}%
	\or
	\textcolor{fglcpcolor3}{\textbf{#1}}%
	\or
	\textcolor{fglcpcolor5}{\textbf{#1}}%
	\else
	\textcolor{fglcpcolor4}{\textbf{#1}}%
	\fi
}

\newcounter{@fglsparenscounter}

\def\countlparen{%
	\addtocounter{@fglsparenscounter}{1}\@fglsrainbow{\lparen}%
}
\def\countrparen{%
	\@fglsrainbow{\rparen}\addtocounter{@fglsparenscounter}{-1}%
}

\let\lparen(
\let\rparen)

\begingroup
\catcode`(\active
\catcode`)\active
\gdef\count@fglsparenscounter{%
	\let(\countlparen
	\let)\countrparen
}
\endgroup   

\newenvironment{cps}
{%
	\catcode`(\active
	\catcode`)\active
	\count@fglsparenscounter
	\setcounter{@fglsparenscounter}{0}%
}
{}

% ------------------------------
% Homeworks
% ------------------------------

\newenvironment{question}{\ifFGL@showawnser\color{dunkelgrau}\else\color{black}\fi}{}
\specialcomment{awnser}{\color{black}\normalfont}{}
\ifFGL@showawnser\includecomment{awnser}\else\excludecomment{awnser}\fi

% ------------------------------
% Semantics
% ------------------------------
\DeclareDocumentEnvironment{fgls}{O{\FGL@situation}}{
	\let\fgslisinfgls\@fglsundefined
	\NewDocumentCommand{\fgslisinfgls}{}{true}
	% Commands
			\let\cs\@fglsundefined
			\NewDocumentCommand{\cs}{}{#1}
			%% Text shortcuts
			\let\o\@fglsundefined
			\let\v\@fglsundefined
			\let\m\@fglsundefined
			\let\j\@fglsundefined
			
			
			
			
			
			\NewDocumentCommand{\o}{m}{\obl{##1}}
			\NewDocumentCommand{\v}{m}{\obli{##1}}
			\NewDocumentCommand{\m}{m}{\mel{##1}}
			\NewDocumentCommand{\j}{m}{\meli{##1}}
			
			\let\l\@fglsundefined
			\let\L\@fglsundefined
			\NewDocumentCommand{\l}{m O{}}{\lambh{##1}[##2]}
			\NewDocumentCommand{\L}{m O{}}{\lambH{##1}[##2]}
			
			\let\h\@fglsundefined
			\NewDocumentCommand{\h}{m}{\type{##1}}
	
			\let\ox\@fglsundefined
			\let\oX\@fglsundefined
			\let\oy\@fglsundefined
			\let\oY\@fglsundefined
			\let\oz\@fglsundefined
			\let\oZ\@fglsundefined
			\let\oi\@fglsundefined
			\let\oI\@fglsundefined
			\let\op\@fglsundefined
			\let\oP\@fglsundefined
			\let\oq\@fglsundefined
			\let\oQ\@fglsundefined
			\let\oR\@fglsundefined
			\let\os\@fglsundefined
			\let\oS\@fglsundefined
			\let\x\@fglsundefined
			\let\X\@fglsundefined
			\let\y\@fglsundefined
			\let\Y\@fglsundefined
			\let\z\@fglsundefined
			\let\Z\@fglsundefined
			% Constants
			%% Object Language	
			\NewDocumentCommand{\ox}{}{\v{x}}
			\NewDocumentCommand{\oX}{}{\v{X}}
			\NewDocumentCommand{\oy}{}{\v{y}}
			\NewDocumentCommand{\oY}{}{\v{Y}}
			\NewDocumentCommand{\oz}{}{\v{z}}
			\NewDocumentCommand{\oZ}{}{\v{Z}}
			\NewDocumentCommand{\oi}{}{\v{i}}
			\NewDocumentCommand{\oI}{}{\v{I}}
			\NewDocumentCommand{\os}{}{\v{s}}
			\NewDocumentCommand{\oS}{}{\v{S}}
			\NewDocumentCommand{\oq}{}{\v{q}}
			\NewDocumentCommand{\oQ}{}{\v{Q}}
			\NewDocumentCommand{\op}{}{\v{p}}
			\NewDocumentCommand{\oP}{}{\v{P}}
			\NewDocumentCommand{\oR}{}{\v{R}}
			\NewDocumentCommand{\x}{}{\obli{x}}
			\NewDocumentCommand{\X}{}{\obli{X}}
			\NewDocumentCommand{\y}{}{\obli{y}}
			\NewDocumentCommand{\Y}{}{\obli{Y}}
			\NewDocumentCommand{\z}{}{\obli{z}}
			\NewDocumentCommand{\Z}{}{\obli{Z}}
			
			\let\mx\@fglsundefined
			\let\mX\@fglsundefined
			\let\my\@fglsundefined
			\let\mY\@fglsundefined
			\let\mz\@fglsundefined
			\let\mZ\@fglsundefined
			\let\mi\@fglsundefined
			\let\mI\@fglsundefined
			\let\ms\@fglsundefined
			\let\mS\@fglsundefined
			\let\mp\@fglsundefined
			\let\mP\@fglsundefined
			\let\mq\@fglsundefined
			\let\mQ\@fglsundefined
			\let\mr\@fglsundefined
			\let\mR\@fglsundefined
		
			%% Meta Language
			\NewDocumentCommand{\mx}{}{\text{\textit{x}}}
			\NewDocumentCommand{\mX}{}{\text{\textit{X}}}
			\NewDocumentCommand{\my}{}{\text{\textit{y}}}
			\NewDocumentCommand{\mY}{}{\text{\textit{Y}}}
			\NewDocumentCommand{\mz}{}{\text{\textit{z}}}
			\NewDocumentCommand{\mZ}{}{\text{\textit{Z}}}
			\NewDocumentCommand{\mi}{}{\text{\textit{i}}}
			\NewDocumentCommand{\mI}{}{\text{\textit{I}}}
			\NewDocumentCommand{\ms}{}{\text{\textit{s}}}
			\NewDocumentCommand{\mS}{}{\text{\textit{S}}}
			\NewDocumentCommand{\mp}{}{\text{\textit{p}}}
			\NewDocumentCommand{\mP}{}{\text{\textit{P}}}
			\NewDocumentCommand{\mq}{}{\text{\textit{q}}}
			\NewDocumentCommand{\mQ}{}{\text{\textit{Q}}}
			\NewDocumentCommand{\mr}{}{\text{\textit{r}}}
			\NewDocumentCommand{\mR}{}{\text{\textit{R}}}
	
			\let\qe\@fglsundefined
			\let\qE\@fglsundefined
			\let\qu\@fglsundefined
			\let\qU\@fglsundefined
			\let\qa\@fglsundefined
			\let\qA\@fglsundefined
			\let\jn\@fglsundefined
			\let\jN\@fglsundefined
			\let\jk\@fglsundefined
			\let\jK\@fglsundefined
			\let\jd\@fglsundefined
			\let\jD\@fglsundefined
			\let\ji\@fglsundefined
			\let\jI\@fglsundefined
			\let\ci\@fglsundefined
			\let\cI\@fglsundefined
		
			%% Logic
			\NewDocumentCommand{\qe}{}{\ensuremath{\exists}}
			\NewDocumentCommand{\qE}{}{\ensuremath{\bm{\exists}}}
			\NewDocumentCommand{\qu}{}{\ensuremath{\exists}!}
			\NewDocumentCommand{\qU}{}{\ensuremath{\bm{\exists}!}}
			\NewDocumentCommand{\qa}{}{\ensuremath{\forall}}
			\NewDocumentCommand{\qA}{}{\ensuremath{\bm{\forall}}}
			\NewDocumentCommand{\jn}{}{\ensuremath{\neg}}
			\NewDocumentCommand{\jN}{}{\ensuremath{\bm{\neg}}}
			\NewDocumentCommand{\jk}{}{\ensuremath{\land}}
			\NewDocumentCommand{\jK}{}{\ensuremath{\bm{\land}}}
			\NewDocumentCommand{\jd}{}{\ensuremath{\lor}}
			\NewDocumentCommand{\jD}{}{\ensuremath{\bm{\lor}}}
			\NewDocumentCommand{\ji}{}{\ensuremath{\rightarrow}}
			\NewDocumentCommand{\jI}{}{\ensuremath{\bm{\rightarrow}}}
			\NewDocumentCommand{\ci}{}{\ensuremath{\in}}
			\NewDocumentCommand{\cI}{}{\ensuremath{\bm{\in}}}
			\NewDocumentCommand{\cd}{}{\ensuremath{\downarrow}}
			\NewDocumentCommand{\cD}{}{\ensuremath{\bm{\downarrow}}}
			\NewDocumentCommand{\ce}{}{\ensuremath{\emptyset}}
			\NewDocumentCommand{\cE}{}{\ensuremath{\bm{\emptyset}}}
	
			\let\ax\@fglsundefined
			\let\aX\@fglsundefined
			\let\ay\@fglsundefined
			\let\aY\@fglsundefined
			\let\az\@fglsundefined
			\let\aZ\@fglsundefined
			\let\ai\@fglsundefined
			\let\aI\@fglsundefined
			\let\as\@fglsundefined
			\let\aS\@fglsundefined
			\let\ar\@fglsundefined
			\let\aR\@fglsundefined
			\let\ap\@fglsundefined
			\let\aP\@fglsundefined
			\let\aq\@fglsundefined
			\let\aQ\@fglsundefined
			\let\ae\@fglsundefined
			\let\aE\@fglsundefined
	
			%% Arguments Variables
			\NewDocumentCommand{\ax}{}{\a{x}}
			\NewDocumentCommand{\aX}{}{\a{X}}
			\NewDocumentCommand{\ay}{}{\a{y}}
			\NewDocumentCommand{\aY}{}{\a{Y}}
			\NewDocumentCommand{\az}{}{\a{z}}
			\NewDocumentCommand{\aZ}{}{\a{Z}}
			\NewDocumentCommand{\ai}{}{\a{i}}
			\NewDocumentCommand{\aI}{}{\a{I}}
			\NewDocumentCommand{\as}{}{\a{s}}
			\NewDocumentCommand{\aS}{}{\a{S}}
			\NewDocumentCommand{\ar}{}{\a{r}}
			\NewDocumentCommand{\aR}{}{\a{R}}
			\NewDocumentCommand{\ap}{}{\a{p}}
			\NewDocumentCommand{\aP}{}{\a{P}}
			\NewDocumentCommand{\aq}{}{\a{q}}
			\NewDocumentCommand{\aQ}{}{\a{Q}}
			\NewDocumentCommand{\ae}{}{\a{e}}
			\NewDocumentCommand{\aE}{}{\a{E}}
			
			\let\bx\@fglsundefined
			\let\bX\@fglsundefined
			\let\by\@fglsundefined
			\let\bY\@fglsundefined
			\let\bz\@fglsundefined
			\let\bZ\@fglsundefined
			\let\bi\@fglsundefined
			\let\bI\@fglsundefined
			\let\bs\@fglsundefined
			\let\bS\@fglsundefined
			\let\br\@fglsundefined
			\let\bR\@fglsundefined
			\let\bp\@fglsundefined
			\let\bP\@fglsundefined
			\let\bq\@fglsundefined
			\let\bQ\@fglsundefined
			\let\be\@fglsundefined
			\let\bE\@fglsundefined
			
			%% Arguments Variables Meta
			\NewDocumentCommand{\bx}{}{(\j{x})}
			\NewDocumentCommand{\bX}{}{(\j{X})}
			\NewDocumentCommand{\by}{}{(\j{y})}
			\NewDocumentCommand{\bY}{}{(\j{Y})}
			\NewDocumentCommand{\bz}{}{(\j{z})}
			\NewDocumentCommand{\bZ}{}{(\j{Z})}
			\NewDocumentCommand{\bi}{}{(\j{i})}
			\NewDocumentCommand{\bI}{}{(\j{I})}
			\NewDocumentCommand{\bs}{}{(\j{s})}
			\NewDocumentCommand{\bS}{}{(\j{S})}
			\NewDocumentCommand{\br}{}{(\j{r})}
			\NewDocumentCommand{\bR}{}{(\j{R})}
			\NewDocumentCommand{\bp}{}{(\j{p})}
			\NewDocumentCommand{\bP}{}{(\j{P})}
			\NewDocumentCommand{\bq}{}{(\j{q})}
			\NewDocumentCommand{\bQ}{}{(\j{Q})}
			\NewDocumentCommand{\be}{}{(\j{e})}
			\NewDocumentCommand{\bE}{}{(\j{E})}
			
			
			\let\Ax\@fglsundefined
			\let\AX\@fglsundefined
			\let\Ay\@fglsundefined
			\let\AY\@fglsundefined
			\let\Az\@fglsundefined
			\let\AZ\@fglsundefined
			\let\Ai\@fglsundefined
			\let\AI\@fglsundefined
			\let\As\@fglsundefined
			\let\AS\@fglsundefined
			\let\Ar\@fglsundefined
			\let\AR\@fglsundefined
			\let\Ap\@fglsundefined
			\let\AP\@fglsundefined
			\let\Aq\@fglsundefined
			\let\AQ\@fglsundefined
			\let\Ae\@fglsundefined
			\let\AE\@fglsundefined
			
			
			
			\NewDocumentCommand{\Ax}{}{\A{x}}
			\NewDocumentCommand{\AX}{}{\A{X}}
			\NewDocumentCommand{\Ay}{}{\A{y}}
			\NewDocumentCommand{\AY}{}{\A{Y}}
			\NewDocumentCommand{\Az}{}{\A{z}}
			\NewDocumentCommand{\AZ}{}{\A{Z}}
			\NewDocumentCommand{\Ai}{}{\A{i}}
			\NewDocumentCommand{\AI}{}{\A{I}}
			\NewDocumentCommand{\As}{}{\A{s}}
			\NewDocumentCommand{\AS}{}{\A{S}}
			\NewDocumentCommand{\Ar}{}{\A{r}}
			\NewDocumentCommand{\AR}{}{\A{R}}
			\NewDocumentCommand{\Ap}{}{\A{p}}
			\NewDocumentCommand{\AP}{}{\A{P}}
			\NewDocumentCommand{\Aq}{}{\A{q}}
			\NewDocumentCommand{\AQ}{}{\A{Q}}
			\NewDocumentCommand{\Ae}{}{\A{e}}
			\NewDocumentCommand{\AE}{}{\A{E}}
			
			\let\sss\ss
			
			\let\ss\@fglsundefined
			\let\sS\@fglsundefined
			\let\sz\@fglsundefined
			\let\sZ\@fglsundefined
			\let\so\@fglsundefined
			\let\sO\@fglsundefined
			\let\st\@fglsundefined
			\let\sT\@fglsundefined
			
	
			
			%% Situations
			\NewDocumentCommand{\ss}{}{\sstar}
			\NewDocumentCommand{\sS}{}{\sstaR}
			\NewDocumentCommand{\sz}{}{\szero}
			\NewDocumentCommand{\sZ}{}{\szerO}
			\NewDocumentCommand{\so}{}{\sone}
			\NewDocumentCommand{\sO}{}{\sonE}
			\NewDocumentCommand{\st}{}{\stwo}
			\NewDocumentCommand{\sT}{}{\stwO}
			
			%% Traces
			
			\let\tx\@fglsundefined
			\let\tX\@fglsundefined
			\let\Tx\@fglsundefined
			\let\TX\@fglsundefined
			\let\ty\@fglsundefined
			\let\tY\@fglsundefined
			\let\Ty\@fglsundefined
			\let\TY\@fglsundefined
			\let\tz\@fglsundefined
			\let\tZ\@fglsundefined
			\let\Tz\@fglsundefined
			\let\TZ\@fglsundefined
			
			
			\NewDocumentCommand{\tx}{}{\tracex}
			\NewDocumentCommand{\tX}{}{\traceX}
			\NewDocumentCommand{\Tx}{}{\tracEx}
			\NewDocumentCommand{\TX}{}{\tracEX}
			\NewDocumentCommand{\ty}{}{\tracey}
			\NewDocumentCommand{\tY}{}{\traceY}
			\NewDocumentCommand{\Ty}{}{\tracEy}
			\NewDocumentCommand{\TY}{}{\tracEY}
			\NewDocumentCommand{\tz}{}{\tracez}
			\NewDocumentCommand{\tZ}{}{\traceZ}
			\NewDocumentCommand{\Tz}{}{\tracEz}
			\NewDocumentCommand{\TZ}{}{\tracEZ}
	
		
		% Commands
		%% Text shortcuts
	
	
		%% Arguments
		\let\a\@fglsundefined
		\let\A\@fglsundefined
		\let\sa\@fglsundefined
		\let\sA\@fglsundefined
		\NewDocumentCommand{\a}{m}{\obl{(}\obli{##1}\obl{)}}
		\NewDocumentCommand{\A}{m}{\obl{(##1)}}
		\NewDocumentCommand{\sa}{m}{\sarrow{##1}}
		\NewDocumentCommand{\sA}{m}{\sarroW{##1}}
		
		%% Lambdas
		\let\lx\@fglsundefined
		\let\lX\@fglsundefined
		\let\Lx\@fglsundefined
		\let\LX\@fglsundefined
		\let\ly\@fglsundefined
		\let\lY\@fglsundefined
		\let\Ly\@fglsundefined
		\let\LY\@fglsundefined
		\let\lz\@fglsundefined
		\let\lZ\@fglsundefined
		\let\Lz\@fglsundefined
		\let\LZ\@fglsundefined
		\let\lp\@fglsundefined
		\let\lP\@fglsundefined
		\let\Lp\@fglsundefined
		\let\LP\@fglsundefined
		\let\lq\@fglsundefined
		\let\lQ\@fglsundefined
		\let\Lq\@fglsundefined
		\let\LQ\@fglsundefined
		\let\ls\@fglsundefined
		\let\lS\@fglsundefined
		\let\Ls\@fglsundefined
		\let\LS\@fglsundefined
		\let\li\@fglsundefined
		\let\lI\@fglsundefined
		\let\Li\@fglsundefined
		\let\LI\@fglsundefined
		\let\lr\@fglsundefined
		\let\lR\@fglsundefined
		\let\Lr\@fglsundefined
		\let\LR\@fglsundefined
		\let\lu\@fglsundefined
		\let\lU\@fglsundefined
		\let\Lu\@fglsundefined
		\let\LU\@fglsundefined
		\let\lv\@fglsundefined
		\let\lV\@fglsundefined
		\let\Lv\@fglsundefined
		\let\LV\@fglsundefined
	
	
		\NewDocumentCommand{\lx}{O{}}{\lmdx[##1]}
		\NewDocumentCommand{\lX}{O{}}{\lmdX[##1]}
		\NewDocumentCommand{\Lx}{O{}}{\lmDx[##1]}
		\NewDocumentCommand{\LX}{O{}}{\lmDX[##1]}
		\NewDocumentCommand{\ly}{O{}}{\lmdy[##1]}
		\NewDocumentCommand{\lY}{O{}}{\lmdY[##1]}
		\NewDocumentCommand{\Ly}{O{}}{\lmDy[##1]}
		\NewDocumentCommand{\LY}{O{}}{\lmDY[##1]}
		\NewDocumentCommand{\lz}{O{}}{\lmdz[##1]}
		\NewDocumentCommand{\lZ}{O{}}{\lmdZ[##1]}
		\NewDocumentCommand{\Lz}{O{}}{\lmDz[##1]}
		\NewDocumentCommand{\LZ}{O{}}{\lmDZ[##1]}
		\NewDocumentCommand{\lp}{O{}}{\lmdp[##1]}
		\NewDocumentCommand{\lP}{O{}}{\lmdP[##1]}
		\NewDocumentCommand{\Lp}{O{}}{\lmDp[##1]}
		\NewDocumentCommand{\LP}{O{}}{\lmDP[##1]}
		\NewDocumentCommand{\lq}{O{}}{\lmdq[##1]}
		\NewDocumentCommand{\lQ}{O{}}{\lmdQ[##1]}
		\NewDocumentCommand{\Lq}{O{}}{\lmDq[##1]}
		\NewDocumentCommand{\LQ}{O{}}{\lmDQ[##1]}
		\NewDocumentCommand{\ls}{O{}}{\lmds[##1]}
		\NewDocumentCommand{\lS}{O{}}{\lmdS[##1]}
		\NewDocumentCommand{\Ls}{O{}}{\lmDs[##1]}
		\NewDocumentCommand{\LS}{O{}}{\lmDS[##1]}
		\NewDocumentCommand{\li}{O{}}{\lmdi[##1]}
		\NewDocumentCommand{\lI}{O{}}{\lmdI[##1]}
		\NewDocumentCommand{\Li}{O{}}{\lmDi[##1]}
		\NewDocumentCommand{\LI}{O{}}{\lmDI[##1]}
		\NewDocumentCommand{\lr}{O{}}{\lmdr[##1]}
		\NewDocumentCommand{\lR}{O{}}{\lmdR[##1]}
		\NewDocumentCommand{\Lr}{O{}}{\lmDr[##1]}
		\NewDocumentCommand{\LR}{O{}}{\lmDR[##1]}
		\NewDocumentCommand{\lu}{O{}}{\lmdu[##1]}
		\NewDocumentCommand{\lU}{O{}}{\lmdU[##1]}
		\NewDocumentCommand{\Lu}{O{}}{\lmDu[##1]}
		\NewDocumentCommand{\LU}{O{}}{\lmDU[##1]}
		\NewDocumentCommand{\lv}{O{}}{\lmdv[##1]}
		\NewDocumentCommand{\lV}{O{}}{\lmdV[##1]}
		\NewDocumentCommand{\Lv}{O{}}{\lmDv[##1]}
		\NewDocumentCommand{\LV}{O{}}{\lmDV[##1]}
		
		
		%% Lambda Functions
			\let\lfx\@fglsundefined
			\let\lfX\@fglsundefined
			\let\lfy\@fglsundefined
			\let\lfY\@fglsundefined
			\let\lfz\@fglsundefined
			\let\lfZ\@fglsundefined
		\NewDocumentCommand{\lfx}{m O{} O{x} O{#1} O{}}{\lambh{##3}[##5]\ifempty{##2}\bool{\j{##3} ##1 in ##4}\else\bool{##2}\fi}
		\NewDocumentCommand{\lfX}{m O{} O{x} O{#1} O{}}{\lambH{##3}[##5]\ifempty{##2}\booL{\j{##3} ##1 in ##4}\else\booL{##2}\fi}
		\NewDocumentCommand{\lfy}{m O{} O{y} O{x} O{#1} O{} O{}}{\lambh{##3}[##6]\lambh{##4}[##7]\ifempty{##2}\bool{\j{##4} ##1 \j{##3} in ##5}\else\bool{##2}\fi}
		\NewDocumentCommand{\lfY}{m O{} O{y} O{x} O{#1} O{} O{}}{\lambH{##3}[##6]\lambH{##4}[##7]\ifempty{##2}\booL{\j{##4} ##1 \j{##3} in ##5}\else\booL{##2}\fi}
		\NewDocumentCommand{\lfz}{m O{} O{z} O{y} O{x} O{#1} O{} O{} O{}}{\lambh{##3}[##7]\lambh{##4}[##8]\lambh{##5}[##9]\ifempty{##2}\bool{\j{##5} ##1 \j{##4}\ \j{##3} in ##6}\else\bool{##2}\fi}
		\NewDocumentCommand{\lfZ}{m O{} O{z} O{y} O{x} O{#1} O{} O{} O{}}{\lambH{##3}[##7]\lambH{##4}[##8]\lambH{##5}[##9]\ifempty{##2}\booL{\j{##5} ##1 \j{##4}\ \j{##3} in ##6}\else\booL{##2}\fi}
	
			\let\lfsx\@fglsundefined
			\let\lfsX\@fglsundefined
			\let\lfsy\@fglsundefined
			\let\lfsY\@fglsundefined
			\let\lfsz\@fglsundefined
			\let\lfsZ\@fglsundefined
		\NewDocumentCommand{\lfsx}{m O{} O{\sblank} O{x} O{} O{}}{\lambh{##3}[##5]\lambh{##4}[##6]\ifempty{##2}\bool{\j{##4} ##1 in ##3}\else\bool{##2}\fi}
		\NewDocumentCommand{\lfsX}{m O{} O{\sblank} O{x} O{} O{}}{\lambH{##3}[##5]\lambH{##4}[##6]\ifempty{##2}\booL{\j{##4} ##1 in ##3}\else\booL{##2}\fi}
		\NewDocumentCommand{\lfsy}{m O{} O{\sblank} O{y} O{x} O{} O{} O{}}{\lambh{##3}[##6]\lambh{##4}[##7]\lambh{##5}[##8]\ifempty{##2}\bool{\j{##5} ##1 \j{##4} in ##3}\else\bool{##2}\fi}
		\NewDocumentCommand{\lfsY}{m O{} O{\sblank} O{y} O{x} O{} O{} O{}}{\lambH{##3}[##6]\lambH{##4}[##7]\lambH{##5}[##8]\ifempty{##2}\booL{\j{##5} ##1 \j{##4} in ##3}\else\booL{##2}\fi}
		\NewDocumentCommand{\lfsz}{m O{} O{\sblank} O{z} O{y} O{x} O{} O{} O{}}{\lambh{##3}[##7]\lambh{##4}[##8]\lambh{##5}[##9]\lambh{##6}[##9]\ifempty{##2}\bool{\j{##6} ##1 \j{##5}\ \j{##4} in ##3}\else\bool{##2}\fi}
		\NewDocumentCommand{\lfsZ}{m O{} O{\sblank} O{z} O{y} O{x} O{} O{} O{}}{\lambH{##3}[##7]\lambH{##4}[##8]\lambH{##5}[##9]\lambH{##6}[##9]\ifempty{##2}\booL{\j{##6} ##1 \j{##5}\ \j{##4} in ##3}\else\booL{##2}\fi}
	
		
		%% fast derivation calc commands
		\let\r\@fglsundefined
		\let\R\@fglsundefined
		\let\n\@fglsundefined
		\let\N\@fglsundefined
		\let\s\@fglsundefined
		\let\S\@fglsundefined
		\let\cset\@fglsundefined
		
		\NewDocumentCommand{\r}{O{} O{} m}{\lambby[##1][##2]{##3}}
		\NewDocumentCommand{\R}{O{} O{} m}{\lambbY[##1][##2]{##3}}
		\NewDocumentCommand{\n}{m}{\bool{##1}}
		\NewDocumentCommand{\N}{m}{\booL{##1}}
		\NewDocumentCommand{\s}{O{x} m}{\set[##1]{##2}}
		\NewDocumentCommand{\S}{O{x} m}{\seT[##1]{##2}}
		\NewDocumentCommand{\cset}{m O{} O{\cs}}{\ensuremath{##1_\text{##3}^\text{##2}}}
	
		\let\i\@fglsundefined
		\let\I\@fglsundefined
		\let\e\@fglsundefined
		\let\E\@fglsundefined
		
		\NewDocumentCommand{\i}{m}{\sdi{##1}}
		\NewDocumentCommand{\I}{m}{\sdI{##1}}
		\NewDocumentCommand{\e}{O{#1} m}{\sde[##1]{##2}}
		\NewDocumentCommand{\E}{O{#1} m}{\sdE[##1]{##2}}
		
		\let\c\@fglsundefined
		\let\C\@fglsundefined
		
		\NewDocumentCommand{\c}{O{\bm{i}} m}{\sic[##1]{##2}}
		\NewDocumentCommand{\C}{O{\bm{i}} m}{\siC[##1]{##2}}
	
		\let\t\@fglsundefined
		\let\T\@fglsundefined
		\let\ti\@fglsundefined
		\let\tI\@fglsundefined
		\let\tb\@fglsundefined
		\let\tB\@fglsundefined
		\let\tbi\@fglsundefined
		\let\tbI\@fglsundefined
		\let\d\@fglsundefined
		\let\D\@fglsundefined
		
		\NewDocumentCommand{\t}{m}{\sit{##1}}
		\NewDocumentCommand{\T}{m}{\siT{##1}}
		\NewDocumentCommand{\ti}{m}{\sit{\textit{##1}}}
		\NewDocumentCommand{\tI}{m}{\siT{\textit{##1}}}
		\NewDocumentCommand{\tb}{m}{\sitnobf{##1}}
		\NewDocumentCommand{\tB}{m}{\sitnobF{##1}}
		\NewDocumentCommand{\tbi}{m}{\sitnobfi{##1}}
		\NewDocumentCommand{\tbI}{m}{\sitnobfI{##1}}
		\NewDocumentCommand{\d}{O{g} m}{\sid[##1]{##2}}
		\NewDocumentCommand{\D}{O{g} m}{\siD[##1]{##2}}
	
		\let\dr\@fglsundefined
		\let\dR\@fglsundefined
		\let\drr\@fglsundefined
		\let\dRR\@fglsundefined
		\let\drrr\@fglsundefined
		\let\dRRR\@fglsundefined
		\NewDocumentCommand{\dr}{m O{r} O{g} O{x}}{\sidr{##1}{##2}[##4][##3]}
		\NewDocumentCommand{\dR}{m O{r} O{g} O{x}}{\sidR{##1}{##2}[##4][##3]}
		\NewDocumentCommand{\drr}{m O{r} O{d} O{g} O{x} O{y}}{\sidrr{##1}{##2}{##3}[##5][##6][##4]}
		\NewDocumentCommand{\dRR}{m O{r} O{d} O{g} O{x} O{y}}{\sidRR{##1}{##2}{##3}[##5][##6][##4]}
		\NewDocumentCommand{\drrr}{m O{r} O{d} O{t} O{g} O{x} O{y} O{z}}{\sidrrr{##1}{##2}{##3}{##4}[##6][##7][##8][##5]}
		\NewDocumentCommand{\dRRR}{m O{r} O{d} O{t} O{g} O{x} O{y} O{z}}{\sidRRR{##1}{##2}{##3}{##4}[##6][##7][##8][##5]}
	}{
	\let\fgslisinfgls\@fglsundefined
}


%% Derivation
\DeclareDocumentEnvironment{semderivation}{O{\FGL@situation} O{}}{
	
	\let\@fglsinterladeriref\@fglsundefined
	\newcommand{\@fglsinterladeriref}{\ifempty{#2}\the@fglsderivationcounter\else#2\fi}


	\setcounter{@fglscalcitemcounter}{0}
	\ifempty{\fglsisinderivation}\stepcounter{@fglsderivationcounter}\fi
	\let\@snote\@fglsundefined
	\newcommand{\@snote}[1]{\strut\hfill \raisebox{.22ex}{\tiny ##1}}
	\let\fa\@fglsundefined
	\let\abs\@fglsundefined
	\let\mod\@fglsundefined
	\let\var\@fglsundefined
	\let\con\@fglsundefined
	\let\id\@fglsundefined
	\let\lc\@fglsundefined
	\let\nc\@fglsundefined
	\let\lex\@fglsundefined
	\newcommand{\fa}{App}
	\newcommand{\abs}{Abs}
	\newcommand{\mod}{Mod}
	\newcommand{\var}{Var}
	\newcommand{\con}{Con}
	\newcommand{\id}{Id}
	\newcommand{\lex}{Lex}
	\newcommand{\lc}{\ensuremath{\lambda}-\@fragolivarconversion}
	\newcommand{\nc}{\@fragolivarnotationconvention}
	
	
	\let\cdr\@fglsundefined
	\NewDocumentCommand{\cdr}{}{sem:deri:\ifempty{#2}\the@fglsderivationcounter\else#2\fi}
	
	\let\ds\@fglsundefined
	
	\NewDocumentCommand{\ds}{O{} m O{}}{\stepcounter{@fglscalcitemcounter}\item[\ifempty{##3}\ensuremath{\stackrel{\color{deivationrowcountcolor}\the@fglscalcitemcounter.\color{black}}{=\ }}\else##3\fi]\edef\@currentlabel{\the@fglscalcitemcounter}\label{sem:deri:\@fglsinterladeriref:ds:\the@fglscalcitemcounter} ##2 \@snote{##1}}
	\let\dS\@fglsundefined
	\NewDocumentCommand{\dS}{O{} m O{}}{\stepcounter{@fglscalcitemcounter}\item[##3]\edef\@currentlabel{\the@fglscalcitemcounter}\label{sem:deri:\@fglsinterladeriref:ds:\the@fglscalcitemcounter} ##2 \@snote{##1}}
	\let\@fglsopenedfglsderi\@fglsundefined
	
	\ifempty{\fglsisinderivation}\begin{fgls}[#1]\fi
	
		\begin{cps}
			\ifempty{\fglsisinderivation}\begin{itemize}[leftmargin=*,noitemsep]\edef\@currentlabel{\the@fglsderivationcounter}\label{sem:deri:\@fglsinterladeriref}\else\begin{itemize}\fi
			}
			{
			\end{itemize}
		\end{cps}
	\ifempty{\fglsisinderivation}\end{fgls}\fi
	
}
\DeclareDocumentEnvironment{semcalc}{O{\FGL@situation} O{}}{
	% ------------------------------
	% Counter
	% ------------------------------
	\let\fglsisinderivation\@fglsundefined
	\NewDocumentCommand{\fglsisinderivation}{}{true}
	
	
	
	\let\@fglscurrentdersit\@fglsundefined
	\NewDocumentCommand{\@fglscurrentdersit}{}{#1}
	
	\let\@fglsrefname\@fgslundefined
	\newcommand{\@fglsrefname}{#2}
	\let\@fglsinterladeriref\@fglsundefined
		\newcommand{\@fglsinterladeriref}{\ifempty{\@fglsrefname}\the@fglsderivationcounter\else\@fglsrefname\fi}
	\let\@rentrylabel\@fglsundefined
	\newcommand{\@rentrylabel}{R}
	\let\@rentrylabellower\@fglsundefined
	\newcommand{\@rentrylabellower}{r}
	\stepcounter{@fglscalcitemcounter}
	\stepcounter{@fglsderivationcounter}
	
	\let\cdr\@fglsundefined
	\NewDocumentCommand{\cdr}{}{sem:deri:\@fglsinterladeriref}
	
	\let\rr\@fglsundefined
	\NewDocumentCommand{\rr}{m}{\ref{\cdr:r:##1}}
	\let\rrs\@fglsundefined
	\NewDocumentCommand{\rrs}{m}{\ref{\cdr:rs:##1}}
	\let\rl\@fglsundefined
	\NewDocumentCommand{\rl}{m}{\ref{\cdr:l:##1}}
	\let\rla\@fglsundefined
	\NewDocumentCommand{\rla}{m}{\ref{\cdr:la:##1}}
	
	\let\@snote\@fglsundefined
	\let\rentrysub\@fglsundefined
	\let\rentry\@fglsundefined
	
	\newcommand{\@snote}[1]{\strut\hfill \raisebox{.22ex}{\tiny ##1}}
	
	\NewDocumentCommand{\rentry}{O{} m O{}}{\stepcounter{@fglscalcitemcounter}\item[\ifempty{##3}\text{\@rentrylabel}\the@fglscalcitemcounter:\else##3\fi]\edef\@currentlabel{\@rentrylabel\the@fglscalcitemcounter}\label{sem:deri:\@fglsinterladeriref:\@rentrylabellower:\the@fglscalcitemcounter}##2 \@snote{##1}}
	\newcommand{\rentrysub}[2][]{\begin{itemize}\item[##1] {\footnotesize ##2}\end{itemize}}
	\edef\@currentlabel{\the@fglsderivationcounter}\label{sem:deri:\@fglsinterladeriref}
	\begin{fgls}[#1]
		\begin{enumerate}[label=(\roman*), noitemsep]
		}
		{
		\end{enumerate}
	\end{fgls}
	\let\fglsisinderivation\@fglsundefined
	\let\@fglscurrentdersit\@fglsundefined
}

\newenvironment{semlang}[1][]{
	\setcounter{@fglscalcitemcounter}{0}
	
	
	\let\rlang\@fglsundefined
	\NewDocumentCommand{\rlang}{m O{} O{} O{} O{} O{} O{} O{} O{L}}{\rentry[]{= \ifempty{##2}\else\text{L\textsubscript{##2}}\fi \ifempty{##3}\else\ $\cup$\ \text{L\textsubscript{##3}}\fi\ifempty{##4}\else\ $\cup$\ \text{L\textsubscript{##4}}\fi\ifempty{##5}\else\ $\cup$\ \text{L\textsubscript{##5}}\fi\ifempty{##6}\else\ $\cup$\ \text{L\textsubscript{##6}}\fi\ifempty{##7}\else\ $\cup$\ \text{L\textsubscript{##7}}\fi\ifempty{##8}\else\ $\cup$\ \text{L\textsubscript{##8}}\fi\ifempty{##2}\else\text{\ =\ }\fi$\{$##1$\}$}[##9]}
	
	\renewcommand{\@rentrylabel}{LA}
	\let\@rentrylabellower\@fglsundefined
		\newcommand{\@rentrylabellower}{la}
	\ifempty{#1}\item\textit{\@fragolivarlanguage}:\else\item[#1]\fi
	\begin{cps}
	\begin{itemize}
	}
	{
	\end{itemize}
	\end{cps}

	% 
}
\newenvironment{semtreesem}[1][]{
	\setcounter{@fglscalcitemcounter}{0}

	\ifempty{#1}\item\textit{\@fragolivartreesem}:\else\item[#1]\fi
	
		
		}
		{
}
\newenvironment{semtreesyn}[1][]{
	\setcounter{@fglscalcitemcounter}{0}
	
	\ifempty{#1}\item\textit{\@fragolivartreesyn}:\else\item[#1]\fi
		
	}
	{
		
}
\newenvironment{semtree}[1][]{
	\setcounter{@fglscalcitemcounter}{0}
	\ifempty{#1}\item\textit{\@fragolivartree}:\else\item[#1]\fi
		
		}
		{
		
}
\DeclareDocumentEnvironment{semderi}{O{}}{
	\ifempty{#1}\item\textit{\@fragolivarderivation}:\else\item[#1]\fi
	\begin{semderivation}[\@fglscurrentdersit][\@fglsrefname]
		}
		{
	\end{semderivation}	
}
\newenvironment{semlex}[1][]{
	\setcounter{@fglscalcitemcounter}{0}
	\renewcommand{\@rentrylabel}{L}
	\let\@rentrylabellower\@fglsundefined
		\newcommand{\@rentrylabellower}{l}

	% Lexicon entries
	
	%% Direct
	%%% Extension
	%%%% General
	\let\sldex\@fglsundefined
	\let\sldey\@fglsundefined
	\let\sldez\@fglsundefined
	\NewDocumentCommand{\sldex}{m O{} O{} O{x} O{\cs} O{\@typee} O{}}{\rentry[##3]{\e[##5]{##1} = \l{##4}[##6]\ifempty{##2}\n{\j{##4} ##1 in ##5}\else\n{##2}\fi}[##7]}
	\NewDocumentCommand{\sldey}{m O{} O{} O{x} O{y} O{\cs} O{\@typee} O{\@typee} O{}}{\rentry[##3]{\sde[##6]{##1} = \lambh{##5}[##8]\lambh{##4}[##7]\ifempty{##2}\bool{\j{##4} ##1 \j{##5} in ##6}\else\bool{##2}\fi}[##9]}
	\NewDocumentCommand{\sldez}{m O{} O{} O{x} O{y} O{z} O{\cs} O{\@typee} O{\@typee}}{\rentry[##3]{\sde[##7]{##1} = \lambh{##6}[##9]\lambh{##5}[##9]\lambh{##4}[##8]\ifempty{##2}\bool{\j{##4} ##1 \j{##5} \j{##6} in ##7}\else\bool{##2}\fi}}
	%%%% Proper Names
	\let\sldenn\@fglsundefined
	\NewDocumentCommand{\sldenn}{m O{} O{\cs} O{}}{\rentry[##2]{\sde[##3]{##1} = ##1}[##4]}
		\let\sldennpeter\@fglsundefined
		\let\sldennmaria\@fglsundefined
		\let\sldennanna\@fglsundefined
		\let\sldennalina\@fglsundefined
		\let\sldennmarta\@fglsundefined
		\let\sldennpaul\@fglsundefined
		\let\sldenneike\@fglsundefined
		\let\sldennida\@fglsundefined
		\let\sldenolaf\@fglsundefined
		\let\sldenmichael\@fglsundefined
		\NewDocumentCommand{\sldennpeter}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Peter} = Peter}[##3]}
		\NewDocumentCommand{\sldennmaria}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Maria} = Maria}[##3]}
		\NewDocumentCommand{\sldennanna}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Anna} = Anna}[##3]}
		\NewDocumentCommand{\sldennalina}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Alina} = Alina}[##3]}
		\NewDocumentCommand{\sldennmarta}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Marta} = Marta}[##3]}
		\NewDocumentCommand{\sldennpaul}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Paul} = Paul}[##3]}
		\NewDocumentCommand{\sldenneike}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Eike} = Eike}[##3]}
		\NewDocumentCommand{\sldennida}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Ida} = Ida}[##3]}
		\NewDocumentCommand{\sldenolaf}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Olaf} = Olaf}[##3]}
		\NewDocumentCommand{\sldenmichael}{O{} O{\cs} O{}}{\rentry[##1]{\sde[##2]{Michael} = Michael}[##3]}
	%%%% Nominals
	\let\@fglssldenbuilder\@fglsundefined
	\let\slden\@fglsundefined
	\NewDocumentCommand{\@fglssldenbuilder}{m m m m}{\ensuremath{##1} \@fragolivarlexbool[##2]{##3} ##4}
	\NewDocumentCommand{\slden}{m O{\@fragolivarlarticle} O{} O{x} O{\cs} O{\@typee} O{}}{\sldex{##1}[\@fglssldenbuilder{##4}{\ifempty{##2}\@fragolivarlarticle\else##2\fi}{##1}{##5}][##3][##4][##5][##6][##7]}
		\let\sldenman\@fglsundefined
		\let\sldenwoman\@fglsundefined
		\let\sldenchild\@fglsundefined
		\let\sldendog\@fglsundefined
		\let\sldenhouse\@fglsundefined
		\let\sldenanimal\@fglsundefined
		\NewDocumentCommand{\sldenman}{O{} O{x} O{\cs} O{\@typee} O{}}{\slden{\@fragolivarlexman}[\@fragolivarlarticle][##1][##2][##3][##4][##5]}
		\NewDocumentCommand{\sldenwoman}{O{} O{x} O{\cs} O{\@typee} O{}}{\slden{\@fragolivarlexwoman}[\@fragolivarlarticlegermanswitch][##1][##2][##3][##4][##5]}
		\NewDocumentCommand{\sldenchild}{O{} O{x} O{\cs} O{\@typee} O{}}{\slden{\@fragolivarlexchild}[\@fragolivarlarticle][##1][##2][##3][##4][##5]}
		\NewDocumentCommand{\sldendog}{O{} O{x} O{\cs} O{\@typee} O{}}{\slden{\@fragolivarlexdog}[\@fragolivarlarticle][##1][##2][##3][##4][##5]}
		\NewDocumentCommand{\sldenhouse}{O{} O{x} O{\cs} O{\@typee} O{}}{\slden{\@fragolivarlexhouse}[\@fragolivarlarticle][##1][##2][##3][##4][##5]}
		\NewDocumentCommand{\sldenanimal}{O{} O{x} O{\cs} O{\@typee} O{}}{\slden{\@fragolivarlexanimal}[\@fragolivarlarticlegermanswitchn][##1][##2][##3][##4][##5]}
	%%% Intension
	%%%% General
	\let\sldix\@fglsundefined
	\let\sldiy\@fglsundefined
	\let\sldiz\@fglsundefined
	\NewDocumentCommand{\sldix}{m O{} O{} O{x} O{\sblank} O{\@typee} O{\@types} O{}}{\rentry[##3]{\i{##1} = \l{##5}[##7]\l{##4}[##6]\ifempty{##2}\n{\j{##4} ##1 in ##5}\else\n{##2}\fi}[##8]}
	\NewDocumentCommand{\sldiy}{m O{} O{} O{x} O{y} O{\sblank} O{\@typee} O{\@typee} O{\@types}}{\rentry[##3]{\i{##1} = \l{##6}[##9]\l{##5}[##8]\l{##4}[##7]\ifempty{##2}\n{\j{##4} ##1 \j{##5} in ##6}\else\n{##2}\fi}}
	\NewDocumentCommand{\sldiz}{m O{} O{} O{x} O{y} O{z} O{\sblank} O{\@typee} O{\@types}}{\rentry[##3]{\i{##1} = \l{##7}[##9]\l{##6}[##8]\l{##5}[##8]\l{##4}[##8]\ifempty{##2}\n{\j{##4} ##1 \j{##5} \j{##6} in ##7}\else\n{##2}\fi}}
	%%%% Proper Names
	\let\sldinn\@fglsundefined
	\NewDocumentCommand{\sldinn}{m O{} O{\sblank} O{\@types} O{}}{\rentry[##2]{\sdi{##1} = \lambh{##3}[##4]##1}[##5]}
	
	%% Indirect
	%%% Translation
	\let\slit\@fglsundefined
	\NewDocumentCommand{\slit}{m m O{} O{}}{\rentry[##3]{\sit{##1} = ##2}[##4]}
	%%%% General
	\let\slitnn\@fglsundefined
	\NewDocumentCommand{\slitnn}{m O{} O{}}{\slit{##1}{\obl{\lowercase{\StrMid{##1}{1}{1}}}}[##2][##3]}
		\let\slitnnpeter\@fglsundefined
		\let\slitnnmaria\@fglsundefined
		\let\slitnnmarta\@fglsundefined
		\let\slitnnalina\@fglsundefined
		\let\slitnnanna\@fglsundefined
		\let\slitnnpaul\@fglsundefined
		\let\slitnneike\@fglsundefined
		\let\slitnnida\@fglsundefined
		\let\slitnnolaf\@fglsundefined
		\let\slitnnmichael\@fglsundefined
		\NewDocumentCommand{\slitnnpeter}{O{} O{}}{\slitnn{Peter}[##1][##2]}
		\NewDocumentCommand{\slitnnmaria}{O{} O{}}{\slitnn{Maria}[##1][##2]}
		\NewDocumentCommand{\slitnnmarta}{O{} O{}}{\slitnn{Marta}[##1][##2]}
		\NewDocumentCommand{\slitnnalina}{O{} O{}}{\slitnn{Alina}[##1][##2]}
		\NewDocumentCommand{\slitnnanna}{O{} O{}}{\slitnn{Anna}[##1][##2]}
		\NewDocumentCommand{\slitnnpaul}{O{} O{}}{\slitnn{Paul}[##1][##2]}
		\NewDocumentCommand{\slitnneike}{O{} O{}}{\slitnn{Eike}[##1][##2]}
		\NewDocumentCommand{\slitnnida}{O{} O{}}{\slitnn{Ida}[##1][##2]}
		\NewDocumentCommand{\slitnnolaf}{O{} O{}}{\slitnn{Olaf}[##1][##2]}
		\NewDocumentCommand{\slitnnmichael}{O{} O{}}{\slitnn{Michael}[##1][##2]}
	\let\slitf\@fglsundefined
	\NewDocumentCommand{\slitf}{m O{\bm{i}} O{} O{}}{\slit{##1}{\sic[##2]{\uppercase{\StrMid{##1}{1}{1}}}}[##3][##4]}
	
	%%%% Logic
	\let\slitland\@fglsundefined
	\let\slitlor\@fglsundefined
	\NewDocumentCommand{\slitland}{O{} O{}}{\slit{\@fragolivarand}{\jK}[##1][##2]}
	\NewDocumentCommand{\slitlor}{O{} O{q} O{p} O{\@typet} O{\@typet} O{}}{\slit{\@fragolivaror}{\l{##2}[##4]\l{##3}[##5]\jN\R{\jn\ensuremath{##3}\jK\jN\ensuremath{##2}}}[##1][##6]}
	
	%%%% Quantifier
	\let\slitlmost\@fglsundefined
	\let\slitlno\@fglsundefined
	\let\slitlevery\@fglsundefined
	\let\slitloneindef\@fglsundefined
	\let\slitldefarticle\@fglsundefined
	\let\slitlonenum\@fglsundefined
	\NewDocumentCommand{\slitlmost}{O{} O{}}{\rentry[##1]{\sit{\@fragolivarmost} = \obl{MOST}}[##2]}
	\NewDocumentCommand{\slitlno}{O{} O{Q} O{P} O{x} O{\@typeet} O{\@typeet} O{\@typee} O{}}{\rentry[##1]{\t{\@fragolivarno} = \L{##2}[##5]\o{(}\L{##3}[##6]\lambheN[##4][##7]\R{\sanD{\v{##2}\a{##4}}{\v{##3}\a{##4}}}\o{)}}[##8]}
	\NewDocumentCommand{\slitlevery}{O{} O{Q} O{P} O{x} O{\@typeet} O{\@typeet} O{\@typee} O{}}{\rentry[##1]{\t{\@fragolivarevery} = \L{##2}[##5]\obl{(}\L{##3}[##6]\lambheN[##4][##7]\R{\sanD{\v{##2}\a{##4}}{\sneg\v{##3}\a{##4}}}\o{)}}[##8]}
	\NewDocumentCommand{\slitloneindef}{O{} O{Q} O{P} O{x}  O{\@typeet} O{\@typeet} O{\@typee} O{}}{\rentry[##1]{\t{\@fragolivaroneindef} = \L{##2}[##5]\o{(}\L{##3}[##6]\lambhE[##4][##7]\R{\sanD{\v{##2}\a{##4}}{\v{##3}\a{##4}}}\o{)}}[##8]}
	\NewDocumentCommand{\slitlonenum} {O{} O{Q} O{P} O{x} O{y} O{\@typeet} O{\@typeet} O{\@typee} O{\@typee}} {\rentry[##1]{ \t{\@fragolivaronenum} = \L{##2}[##6]\obl{(}\L{##3}[##7]\lambhE[##4][##8]\R{\sanD{ \sanD{\v{##2}\a{##4}}{\v{##3}\a{##4}}}{\lambheN[##5][##9]\R{\sanD{\sanD{\sneg\a{##4 = ##5} }{\v{##2}\a{##5}}}{\v{##3}\a{##5}}}}}\obl{)}}}
	\NewDocumentCommand{\slitldefarticle}{O{} O{Q} O{P} O{x} O{y} O{\@typeet} O{\@typeet} O{\@typee} O{\@typee}}{\rentry[##1]{\t{\@fragolivardefarticle} = \L{##2}[##6]\o{(}\L{##3}[##7]\lambhE[##4][##8]\R{\sanD{\v{##2}\a{##4}}{\lambheN[##5][##9]\sanD{\R{\sanD{\sneg\a{##4 = ##5}}{\v{##2}\a{##5}}}}{\v{##3}\a{##4}}}}\o{)}}}
	%%%% Attitude
	\let\slitAttitudeBuilder\@fglsundefined
	\let\slitadox\@fglsundefined
	\let\slitaepi\@fglsundefined
	\let\slitabou\@fglsundefined
	\NewDocumentCommand{\slitAttitudeBuilder}{m m O{p} O{x} O{j} O{i} O{\@typest} O{\@typee} O{\@types}}{\sit{##1} = \lambH{##3}[##7]\obl{(}\lambH{##4}[##8]\lambhA[##5][##9]\R{\simP{\o{##2}\a{##4}\a{##6}\a{##5}}{\c{\obli{##3}}}}\obl{)}}
	\NewDocumentCommand{\slitadox}{O{} O{p} O{x} O{j} O{i} O{\@typest} O{\@typee} O{\@types} O{}}{\rentry[##1]{\slitAttitudeBuilder{\@fragolivarlexattdox}{DOX}[##2][##3][##4][##5][##6][##7][##8]}[##9]}
	\NewDocumentCommand{\slitaepi}{O{} O{p} O{x} O{j} O{i} O{\@typest} O{\@typee} O{\@types} O{}}{\rentry[##1]{\slitAttitudeBuilder{\@fragolivarlexattepi}{EPI}[##2][##3][##4][##5][##6][##7][##8]}[##9]}
	\NewDocumentCommand{\slitabou}{O{} O{p} O{x} O{j} O{i} O{\@typest} O{\@typee} O{\@types} O{}}{\rentry[##1]{\slitAttitudeBuilder{\@fragolivarlexattbou}{BOU}[##2][##3][##4][##5][##6][##7][##8]}[##9]}
	%%% Denotation
	%%%% General
	\let\slid\@fglsundefined
	\NewDocumentCommand{\slid}{m m O{} O{} O{}}{\rentry[##3]{\sid[##4]{##1} = ##2}[##5]}
	%%%% Proper Names
	\let\slidnn\@fglsundefined
	\NewDocumentCommand{\slidnn}{m O{} O{} O{}}{\slid{\obl{\lowercase{\StrMid{##1}{1}{1}}}}{##1}[##2][##3][##4]}
		\let\slidnnpeter\@fglsundefined
		\let\slidnnmaria\@fglsundefined
		\let\slidnnmarta\@fglsundefined
		\let\slidnnalina\@fglsundefined
		\let\slidnnanna\@fglsundefined
		\let\slidnnpaul\@fglsundefined
		\let\slidnneike\@fglsundefined
		\let\slidnnida\@fglsundefined
		\let\slidnnolaf\@fglsundefined
		\let\slidnnmichael\@fglsundefined
		\NewDocumentCommand{\slidnnpeter}{O{} O{} O{}}{\slidnn{Peter}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnmaria}{O{} O{} O{}}{\slidnn{Maria}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnmarta}{O{} O{} O{}}{\slidnn{Marta}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnalina}{O{} O{} O{}}{\slidnn{Alina}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnanna}{O{} O{} O{}}{\slidnn{Anna}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnpaul}{O{} O{} O{}}{\slidnn{Paul}[##1][##2][##3]}
		\NewDocumentCommand{\slidnneike}{O{} O{} O{}}{\slidnn{Eike}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnida}{O{} O{} O{}}{\slidnn{Ida}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnolaf}{O{} O{} O{}}{\slidnn{Olaf}[##1][##2][##3]}
		\NewDocumentCommand{\slidnnmichael}{O{} O{} O{}}{\slidnn{Michael}[##1][##2][##3]}
	%%%% Logic
	\let\slidland\@fglsundefined
	\let\slidlequal\@fglsundefined
	\let\slidlneg\@fglsundefined
	\let\slidlexists\@fglsundefined
	\NewDocumentCommand{\slidland}{O{} O{v} O{u} O{} O{\@typet} O{\@typet} O{}}{\slid{\ensuremath{\land}}{\lambh{##2}[##5]\lambh{##3}[##6]\r{\meli{##2} \ensuremath{\cdot} \meli{##3}}}[##1][##4][##7]}
	\NewDocumentCommand{\slidlequal}{O{} O{y} O{x} O{} O{\@typet} O{\@typet} O{}}{\slid{=}{\lambh{##2}[##5]\lambh{##3}[##6]\n{\meli{##2} = \meli{##3}}}[##1][##4][##7]}
	\NewDocumentCommand{\slidlneg}{O{} O{u} O{} O{\@typet} O{}}{\slid{\ensuremath{\neg}}{\lambh{##2}[##4]\r{1 - \meli{##2}}}[##1][##3][##5]}
	\NewDocumentCommand{\slidlexists}{O{} O{P} O{} O{\@typeet} O{}}{\slid{\ensuremath{\exists}}{\lambh{##2}[##4]\n{\ensuremath{\downarrow}\meli{##2} \ensuremath{\neq} \ensuremath{\emptyset}}}[##1][##3][##5]}
	%%%% Attitude
	\NewDocumentCommand{\slidAttitudeBuilder}{m m O{x} O{\sz} O{\so} O{\@typee} O{\@types} O{\@types} O{}}{\slid{##1}{\lambh{##3}[##6]\lambh{##4}[##7]\lambh{##5}[##8]\n{##5 \@fragolivarlis\ \@fragolivarlarticlegermanswitch\ ##2 alternative\  \@fragolivarlof\ \meli{##3} in ##4}}[##9]}
	\NewDocumentCommand{\slidadox}{O{x} O{\sz} O{\so} O{\@typee} O{\@types} O{\@types} O{}}{\slidAttitudeBuilder{DOX}{\@fragolivarlexattdoxterm}[##1][##2][##3][##4][##5][##6][##7]}
	\NewDocumentCommand{\slidaepi}{O{x} O{\sz} O{\so} O{\@typee} O{\@types} O{\@types} O{}}{\slidAttitudeBuilder{EPI}{\@fragolivarlexattepiterm}[##1][##2][##3][##4][##5][##6][##7]}
	\NewDocumentCommand{\slidabou}{O{x} O{\sz} O{\so} O{\@typee} O{\@types} O{\@types} O{}}{\slidAttitudeBuilder{BOU}{\@fragolivarlexattbouterm}[##1][##2][##3][##4][##5][##6][##7]}
	
	
	\ifempty{#1}\item\textit{\@fragolivarlexicon}:\else\item[#1]\fi
	\begin{itemize}
	}
	{
	\end{itemize}
}
\newenvironment{semrulesyn}[1][]{
	\setcounter{@fglscalcitemcounter}{0}
	\renewcommand{\@rentrylabel}{r}
	\let\@rentrylabellower\@fglsundefined
		\newcommand{\@rentrylabellower}{rs}
	% Rules
	%% General
	\let\rsrgarrow\@fglsundefined
	\NewDocumentCommand{\rsrgarrow}{O{} O{\ensuremath{x}} O{\ensuremath{f}} O{}}{\rentry[##1]{\srgarrow[##2][##3]}[##4]}
	
	\ifempty{#1}\item\textit{\@fragolivarrulessyn}:\else\item[#1]\fi
	\begin{itemize}
	}
	{
	\end{itemize}
}
\DeclareDocumentEnvironment{semrule}{O{} O{\@srdesituation}}{
	\setcounter{@fglscalcitemcounter}{0}
	\let\@rentrylabellower\@fglsundefined
	\newcommand{\@rentrylabellower}{r}
	

	% Rules
	%% General
	\let\rsrgarrow\@fglsundefined
	\NewDocumentCommand{\rsrgarrow}{O{} O{\ensuremath{x}} O{\ensuremath{f}} O{}}{\rentry[##1]{\srgarrow[##2][##3]}[##4]}
	
	%% Direkt
	\let\rsrde\@fglsundefined
	\let\rsrdi\@fglsundefined
	\NewDocumentCommand{\rsrde}{m m O{} O{#2} O{}}{\rentry[##3]{\e[##4]{##1}= ##2}[##5]}
	\NewDocumentCommand{\rsrdi}{m m O{} O{}}{\rentry[##3]{\sdi{##1}\ = ##2}[##4]}
	
	%%% Common Zimmerman
	\let\rsrdesbjpred\@fglsundefined
	\let\rsrdesbjquant\@fglsundefined
	\let\rsrdeobjpred\@fglsundefined
	\let\rsrdeobjquant\@fglsundefined
	\let\rsrdequantnounph\@fglsundefined
	\NewDocumentCommand{\rsrdesbjpred}{O{} O{#2} O{\text{\ensuremath{S}}} O{\text{\ensuremath{NN}}} O{\text{\ensuremath{P}}} O{}}{\rentry[##1]{\srdesbjpred[##2][##3][##4][##5]}[##6]}
	\NewDocumentCommand{\rsrdesbjquant}{O{} O{#2} O{\text{\ensuremath{S}}} O{\text{\ensuremath{P}}} O{\text{\ensuremath{QN}}} O{}}{\rsrdesbjpred[##1][##2][##3][##4][##5][##6]}
	\NewDocumentCommand{\rsrdeobjpred}{O{} O{#2} O{\text{\ensuremath{P}}} O{\text{\ensuremath{NN}}} O{\text{\ensuremath{V}}} O{}}{\rsrdesbjpred[##1][##2][##3][##4][##5][##6]}
	\NewDocumentCommand{\rsrdeobjquant}{O{} O{x} O{y} O{#2} O{\text{\ensuremath{P}}} O{\text{\ensuremath{V}}} O{\text{\ensuremath{QN}}} O{\@typee} O{}}{\rentry[##1]{\srdeobjquant[##2][##3][##4][##5][##6][##7][##8][##8]}[##9]}
	\NewDocumentCommand{\rsrdequant}{O{} O{#2} O{\text{\ensuremath{QN}}} O{\text{\ensuremath{N}}} O{\text{\ensuremath{D}}} O{}}{\rsrdesbjpred[##1][##2][##3][##4][##5][##6]}
	
	%%% Logic
	\let\rsrdecoordination\@fglsundefined
	\let\rsrdiconva\@fglsundefined
	\let\rsrdiconvb\@fglsundefined
	\let\rsrdeattitude\@fglsundefined
	\NewDocumentCommand{\rsrdecoordination}{O{} O{#1} O{}}{\rsrde{\v{S K \^{S}}}{\e[##2]{\v{K}}\a{\e[##2]{\^{S}}}\a{\e[##2]{S}}}[##1][##2][##3]}
	\NewDocumentCommand{\rsrdiconva}{O{} O{s} O{\@types} O{}}{\rsrdi{\v{A}}{\lambh{##2}[##3]\e[##2]{\v{A}}}[##1][##4]}
	\NewDocumentCommand{\rsrdiconvb}{O{} O{s} O{\@types} O{}}{\rentry[##1]{\sdi{\v{A}}\obl{(}\textit{##2}\obl{)} = \e[\meli{##2}]{\v{A}}}[##4]}
	\NewDocumentCommand{\rsrdeattitude}{O{} O{\sstar} O{}}{\rsrde{\v{P}}{\e[##2]{\v{V}}\a{\sdi{S}}}[##1][##2][##3]}
	
	%%% Quantorenanhebung
	\let\rsrdeqrsemvar\@fglsundefined
	\let\rsrdeqrabs\@fglsundefined
	\let\rsrdeqrlex\@fglsundefined
	\let\rsrdeqrfa\@fglsundefined
	\let\rsrdeqrtree\@fglsundefined
	\NewDocumentCommand{\rsrdeqrsemvar}{O{} O{\phi} O{\ensuremath{x}} O{#2} O{\textit{g}} O{}}{\rentry[##1]{\srdeqrsemvar[##2][##3][##4][##5]}[##6]}
	\NewDocumentCommand{\rsrdeqrabs}{O{} O{\phi} O{\textit{x}} O{#2} O{\textit{g}} O{\textit{f}} O{\ensuremath{\delta}} O{}}{\rentry[##1]{\srdeqrabs[##2][##3][##4][##5][##6][##7]}[##8]}
	\NewDocumentCommand{\rsrdeqrlex}{O{} O{\ensuremath{\alpha}} O{\ensuremath{\beta}} O{#2} O{\text{\textit{g}}} O{} }{\rentry[##1]{\srdeqrlex[##2][##3][##4][##5]}[##6]}
	\NewDocumentCommand{\rsrdeqrfa}{O{} O{\ensuremath{\alpha}} O{\ensuremath{\beta}} O{\ensuremath{\gamma}} O{#2} O{\text{\textit{g}}} O{}}{\rentry[##1]{\srdeqrfa[##2][##3][##4][##5][##6]}[##7]}
	\NewDocumentCommand{\rsrdeqrtree}{O{} O{x} O{\ensuremath{\psi}} O{\ensuremath{\phi}} O{\ensuremath{\delta}} O{#2} O{\text{\textit{g}}} O{\@typee} O{}}{\rentry[##1]{\srdeqrtree[##2][##3][##4][##5][##6][##7][##8]}[##9]}
	
	
	%% Indirekt 
	%%% Translation
	\let\rsrit\@fglsundefined
	\let\rsriti\@fglsundefined
	\let\rsritibasic\@fglsundefined
	\let\rsritcoordination\@fglsundefined
	\let\rsritpredication\@fglsundefined
	\let\rsritnamedirectobject\@fglsundefined
	\let\rsritquantification\@fglsundefined
	\let\rsritquantificational\@fglsundefined
	\let\rsritquantificationasobj\@fglsundefined
	\let\rsritattitude\@fglsundefined
	\let\rsritraisedsubj\@fglsundefined
	\let\rsritcontrolverbs\@fglsundefined
	\NewDocumentCommand{\rsrit}{m m O{} O{}}{\rentry[##3]{\t{##1} = ##2}[##4]}
	\NewDocumentCommand{\rsriti}{m m O{} O{}}{\rentry[##3]{\ti{##1} = ##2}[##4]}
	\NewDocumentCommand{\rsritibasic}{m m m O{} O{}}{\rentry[##4]{\ti{##1} = \ti{##2}(\ti{##3})}[##5]}
	\NewDocumentCommand{\rsritcoordination}{O{} O{}}{\rsriti{S K \^{S}}{\ti{K}(\ti{\^{S}})(\ti{S})}[##1][##2]}
	\NewDocumentCommand{\rsritpredication}{O{} O{}}{\rsritibasic{S}{P}{NN}[##1][##2]}
	\NewDocumentCommand{\rsritnamedirectobject}{O{} O{}}{\rsritibasic{P}{V}{NN}[##1][##2]}
	\NewDocumentCommand{\rsritquantification}{O{} O{}}{\rsritibasic{S}{Q}{P}[##1][##2]}
	\NewDocumentCommand{\rsritquantificational}{O{} O{}}{\rsritibasic{Q}{D}{N}[##1][##2]}
	\NewDocumentCommand{\rsritquantificationasobj}{O{} O{x} O{y} O{\@typeet} O{\@typeet} O{}}{\rsriti{P}{\L{##2}[##4]\ti{Q}\o{(}\L{##3}[##5]\ti{V}\a{\v{##3}}\a{\v{##2}}\o{)}}[##1][##6]}
	\NewDocumentCommand{\rsritattitude}{O{} O{i} O{\@types} O{}}{\rsriti{P}{\ti{V}\o{(}\L{##2}[##3]\ti{S}\o{)}}[##1][##4]}
	\NewDocumentCommand{\rsritraisedsubj}{O{} O{i} O{\@types} O{}}{\rsriti{S}{\ti{VP}(\L{##2}[##3]\ti{Q})}[##1][##4]}
	\NewDocumentCommand{\rsritcontrolverbs}{O{} O{x} O{i} O{\@typee} O{\@types} O{}}{\rsriti{VP}{\L{##2}[##4]\ti{V}\o{(}\L{##3}[##5]\ti{P}\a{\v{##2}}\o{)}\a{\v{##2}}}[##1][##6]}
	
	%%% Denotation
	\let\rsrid\@fglsundefined
	\let\rsridinterpretvar\@fglsundefined
	\let\rsridapp\@fglsundefined
	\let\rsridabs\@fglsundefined
	\NewDocumentCommand{\rsrid}{m m O{} O{g} O{}}{\rentry[##3]{\sid[##4]{##1} = ##2}[##5]}
	\NewDocumentCommand{\rsridinterpretvar}{O{} O{g} O{x} O{}}{\rsrid{\v{##3}}{\j{##2}\a{##3}}[##1][##2][##4]}
	\NewDocumentCommand{\rsridapp}{O{} O{g} O{\ensuremath{\bm{\alpha}}} O{\ensuremath{\bm{\beta}}} O{}}{\rsrid{##3\a{##4}}{\d[##2]{##3}\a{\d[##2]{##4}}}[##1][##2][##5]}
	\NewDocumentCommand{\rsridabs}{O{} O{g} O{\ensuremath{\bm{\alpha}}} O{x} O{u} O{}}{\rsrid{\L{##4}##3}{\l{##5}\sidR{##3}{##5}[##4]}[##1][##2][##6]}
	
	\ifempty{#1}\item\textit{\@fragolivarrules}:\else\item[#1]\fi
	\begin{itemize}
	}
	{
	\end{itemize}
}
\endinput
%%
